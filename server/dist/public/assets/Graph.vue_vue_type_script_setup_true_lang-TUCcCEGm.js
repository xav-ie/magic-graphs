var ii=Object.defineProperty;var si=(o,e,t)=>e in o?ii(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var yt=(o,e,t)=>si(o,typeof e!="symbol"?e+"":e,t);import{z as O,X as Ur,bn as yn,bo as zr,bp as ai,bq as ui,E as I,g as D,al as ci,ai as qt,br as Gr,L as ct,aL as li,bs as di,ap as fi,aI as hi,O as Wr,an as _i,bt as qr,bu as lt,x as Hr,bv as bn,a4 as pi,bw as ur,T as gi,N as mi,bx as vi,by as yi,bz as bi,bA as Ti,bB as xi,bC as Si,bD as Ci,bE as Ei,bF as Ai,bG as wi,bH as Oi,a2 as Ni,a3 as Mi,d as Di,A as Pi,o as Ii}from"./index-BBtyRjRC.js";import{c as Zt,f as Ri,g as Ct,l as it,h as Et,r as cr,i as lr,D as dr,s as tt,d as ki,_ as Bi}from"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-CAYqa9Pu.js";function Ne(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function Yr(o,e){o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var he={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},dt={duration:.5,overwrite:!1,delay:0},Ln,te,W,ge=1e8,U=1/ge,Tn=Math.PI*2,Fi=Tn/4,Li=0,Vr=Math.sqrt,Ui=Math.cos,zi=Math.sin,Z=function(e){return typeof e=="string"},Y=function(e){return typeof e=="function"},De=function(e){return typeof e=="number"},Un=function(e){return typeof e>"u"},we=function(e){return typeof e=="object"},oe=function(e){return e!==!1},zn=function(){return typeof window<"u"},Ut=function(e){return Y(e)||Z(e)},Kr=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ne=Array.isArray,xn=/(?:-?\.?\d|\.)+/gi,Xr=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,rt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,un=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,$r=/[+-]=-?[.\d]+/,jr=/[^,'"\[\]\s]+/gi,Gi=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,q,Se,Sn,Gn,_e={},Ht={},Zr,Qr=function(e){return(Ht=Ze(e,_e))&&ue},Wn=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Nt=function(e,t){return!t&&console.warn(e)},Jr=function(e,t){return e&&(_e[e]=t)&&Ht&&(Ht[e]=t)||_e},Mt=function(){return 0},Wi={suppressEvents:!0,isStart:!0,kill:!1},zt={suppressEvents:!0,kill:!1},qi={suppressEvents:!0},qn={},Fe=[],Cn={},eo,le={},cn={},fr=30,Gt=[],Hn="",Yn=function(e){var t=e[0],n,r;if(we(t)||Y(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=Gt.length;r--&&!Gt[r].targetTest(t););n=Gt[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new Eo(e[r],n)))||e.splice(r,1);return e},Ke=function(e){return e._gsap||Yn(me(e))[0]._gsap},to=function(e,t,n){return(n=e[t])&&Y(n)?e[t]():Un(n)&&e.getAttribute&&e.getAttribute(t)||n},ie=function(e,t){return(e=e.split(",")).forEach(t)||e},V=function(e){return Math.round(e*1e5)/1e5||0},j=function(e){return Math.round(e*1e7)/1e7||0},st=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+r:n==="-"?e-r:n==="*"?e*r:e/r},Hi=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Yt=function(){var e=Fe.length,t=Fe.slice(0),n,r;for(Cn={},Fe.length=0,n=0;n<e;n++)r=t[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},no=function(e,t,n,r){Fe.length&&!te&&Yt(),e.render(t,n,te&&t<0&&(e._initted||e._startAt)),Fe.length&&!te&&Yt()},ro=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(jr).length<2?t:Z(e)?e.trim():e},oo=function(e){return e},ve=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Yi=function(e){return function(t,n){for(var r in n)r in t||r==="duration"&&e||r==="ease"||(t[r]=n[r])}},Ze=function(e,t){for(var n in t)e[n]=t[n];return e},hr=function o(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=we(t[n])?o(e[n]||(e[n]={}),t[n]):t[n]);return e},Vt=function(e,t){var n={},r;for(r in e)r in t||(n[r]=e[r]);return n},At=function(e){var t=e.parent||q,n=e.keyframes?Yi(ne(e.keyframes)):ve;if(oe(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},Vi=function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0},io=function(e,t,n,r,i){var s=e[r],a;if(i)for(a=t[i];s&&s[i]>a;)s=s._prev;return s?(t._next=s._next,s._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=s,t.parent=t._dp=e,t},Qt=function(e,t,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var i=t._prev,s=t._next;i?i._next=s:e[n]===t&&(e[n]=s),s?s._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},Ue=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Xe=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Ki=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},En=function(e,t,n,r){return e._startAt&&(te?e._startAt.revert(zt):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},Xi=function o(e){return!e||e._ts&&o(e.parent)},_r=function(e){return e._repeat?ft(e._tTime,e=e.duration()+e._rDelay)*e:0},ft=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Kt=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Jt=function(e){return e._end=j(e._start+(e._tDur/Math.abs(e._ts||e._rts||U)||0))},en=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=j(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Jt(e),n._dirty||Xe(n,e)),e},so=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Kt(e.rawTime(),t),(!t._dur||Bt(0,t.totalDuration(),n)-t._tTime>U)&&t.render(n,!0)),Xe(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-U}},Ce=function(e,t,n,r){return t.parent&&Ue(t),t._start=j((De(n)?n:n||e!==q?pe(e,n,t):e._time)+t._delay),t._end=j(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),io(e,t,"_first","_last",e._sort?"_start":0),An(t)||(e._recent=t),r||so(e,t),e._ts<0&&en(e,e._tTime),e},ao=function(e,t){return(_e.ScrollTrigger||Wn("scrollTrigger",t))&&_e.ScrollTrigger.create(t,e)},uo=function(e,t,n,r,i){if(Kn(e,t,i),!e._initted)return 1;if(!n&&e._pt&&!te&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&eo!==de.frame)return Fe.push(e),e._lazy=[i,r],1},$i=function o(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||o(t))},An=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},ji=function(e,t,n,r){var i=e.ratio,s=t<0||!t&&(!e._start&&$i(e)&&!(!e._initted&&An(e))||(e._ts<0||e._dp._ts<0)&&!An(e))?0:1,a=e._rDelay,u=0,c,l,d;if(a&&e._repeat&&(u=Bt(0,e._tDur,t),l=ft(u,a),e._yoyo&&l&1&&(s=1-s),l!==ft(e._tTime,a)&&(i=1-s,e.vars.repeatRefresh&&e._initted&&e.invalidate())),s!==i||te||r||e._zTime===U||!t&&e._zTime){if(!e._initted&&uo(e,t,r,n,u))return;for(d=e._zTime,e._zTime=t||(n?U:0),n||(n=t&&!d),e.ratio=s,e._from&&(s=1-s),e._time=0,e._tTime=u,c=e._pt;c;)c.r(s,c.d),c=c._next;t<0&&En(e,t,n,!0),e._onUpdate&&!n&&fe(e,"onUpdate"),u&&e._repeat&&!n&&e.parent&&fe(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===s&&(s&&Ue(e,1),!n&&!te&&(fe(e,s?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Zi=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},ht=function(e,t,n,r){var i=e._repeat,s=j(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=s/e._dur),e._dur=s,e._tDur=i?i<0?1e10:j(s*(i+1)+e._rDelay*i):s,a>0&&!r&&en(e,e._tTime=e._tDur*a),e.parent&&Jt(e),n||Xe(e.parent,e),e},pr=function(e){return e instanceof re?Xe(e):ht(e,e._dur)},Qi={_start:0,endTime:Mt,totalDuration:Mt},pe=function o(e,t,n){var r=e.labels,i=e._recent||Qi,s=e.duration()>=ge?i.endTime(!1):e._dur,a,u,c;return Z(t)&&(isNaN(t)||t in r)?(u=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),u==="<"||u===">"?(a>=0&&(t=t.replace(/=/,"")),(u==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?i:n).totalDuration()/100:1)):a<0?(t in r||(r[t]=s),r[t]):(u=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&n&&(u=u/100*(ne(n)?n[0]:n).totalDuration()),a>1?o(e,t.substr(0,a-1),n)+u:s+u)):t==null?s:+t},wt=function(e,t,n){var r=De(t[1]),i=(r?2:1)+(e<2?0:1),s=t[i],a,u;if(r&&(s.duration=t[1]),s.parent=n,e){for(a=s,u=n;u&&!("immediateRender"in a);)a=u.vars.defaults||{},u=oe(u.vars.inherit)&&u.parent;s.immediateRender=oe(a.immediateRender),e<2?s.runBackwards=1:s.startAt=t[i-1]}return new K(t[0],s,t[i+1])},Ge=function(e,t){return e||e===0?t(e):t},Bt=function(e,t,n){return n<e?e:n>t?t:n},ee=function(e,t){return!Z(e)||!(t=Gi.exec(e))?"":t[1]},Ji=function(e,t,n){return Ge(n,function(r){return Bt(e,t,r)})},wn=[].slice,co=function(e,t){return e&&we(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&we(e[0]))&&!e.nodeType&&e!==Se},es=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(r){var i;return Z(r)&&!t||co(r,1)?(i=n).push.apply(i,me(r)):n.push(r)})||n},me=function(e,t,n){return W&&!t&&W.selector?W.selector(e):Z(e)&&!n&&(Sn||!_t())?wn.call((t||Gn).querySelectorAll(e),0):ne(e)?es(e,n):co(e)?wn.call(e,0):e?[e]:[]},On=function(e){return e=me(e)[0]||Nt("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return me(t,n.querySelectorAll?n:n===e?Nt("Invalid scope")||Gn.createElement("div"):e)}},lo=function(e){return e.sort(function(){return .5-Math.random()})},fo=function(e){if(Y(e))return e;var t=we(e)?e:{each:e},n=$e(t.ease),r=t.from||0,i=parseFloat(t.base)||0,s={},a=r>0&&r<1,u=isNaN(r)||a,c=t.axis,l=r,d=r;return Z(r)?l=d={center:.5,edges:.5,end:1}[r]||0:!a&&u&&(l=r[0],d=r[1]),function(h,g,v){var _=(v||t).length,p=s[_],f,S,b,E,C,m,T,y,x;if(!p){if(x=t.grid==="auto"?0:(t.grid||[1,ge])[1],!x){for(T=-ge;T<(T=v[x++].getBoundingClientRect().left)&&x<_;);x<_&&x--}for(p=s[_]=[],f=u?Math.min(x,_)*l-.5:r%x,S=x===ge?0:u?_*d/x-.5:r/x|0,T=0,y=ge,m=0;m<_;m++)b=m%x-f,E=S-(m/x|0),p[m]=C=c?Math.abs(c==="y"?E:b):Vr(b*b+E*E),C>T&&(T=C),C<y&&(y=C);r==="random"&&lo(p),p.max=T-y,p.min=y,p.v=_=(parseFloat(t.amount)||parseFloat(t.each)*(x>_?_-1:c?c==="y"?_/x:x:Math.max(x,_/x))||0)*(r==="edges"?-1:1),p.b=_<0?i-_:i,p.u=ee(t.amount||t.each)||0,n=n&&_<0?xo(n):n}return _=(p[h]-p.min)/p.max||0,j(p.b+(n?n(_):_)*p.v)+p.u}},Nn=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=j(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(De(n)?0:ee(n))}},ho=function(e,t){var n=ne(e),r,i;return!n&&we(e)&&(r=n=e.radius||ge,e.values?(e=me(e.values),(i=!De(e[0]))&&(r*=r)):e=Nn(e.increment)),Ge(t,n?Y(e)?function(s){return i=e(s),Math.abs(i-s)<=r?i:s}:function(s){for(var a=parseFloat(i?s.x:s),u=parseFloat(i?s.y:0),c=ge,l=0,d=e.length,h,g;d--;)i?(h=e[d].x-a,g=e[d].y-u,h=h*h+g*g):h=Math.abs(e[d]-a),h<c&&(c=h,l=d);return l=!r||c<=r?e[l]:s,i||l===s||De(s)?l:l+ee(s)}:Nn(e))},_o=function(e,t,n,r){return Ge(ne(e)?!t:n===!0?!!(n=0):!r,function(){return ne(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*r)/r})},ts=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(i,s){return s(i)},r)}},ns=function(e,t){return function(n){return e(parseFloat(n))+(t||ee(n))}},rs=function(e,t,n){return go(e,t,0,1,n)},po=function(e,t,n){return Ge(n,function(r){return e[~~t(r)]})},os=function o(e,t,n){var r=t-e;return ne(e)?po(e,o(0,e.length),t):Ge(n,function(i){return(r+(i-e)%r)%r+e})},is=function o(e,t,n){var r=t-e,i=r*2;return ne(e)?po(e,o(0,e.length-1),t):Ge(n,function(s){return s=(i+(s-e)%i)%i||0,e+(s>r?i-s:s)})},Dt=function(e){for(var t=0,n="",r,i,s,a;~(r=e.indexOf("random(",t));)s=e.indexOf(")",r),a=e.charAt(r+7)==="[",i=e.substr(r+7,s-r-7).match(a?jr:xn),n+=e.substr(t,r-t)+_o(a?i:+i[0],a?0:+i[1],+i[2]||1e-5),t=s+1;return n+e.substr(t,e.length-t)},go=function(e,t,n,r,i){var s=t-e,a=r-n;return Ge(i,function(u){return n+((u-e)/s*a||0)})},ss=function o(e,t,n,r){var i=isNaN(e+t)?0:function(g){return(1-g)*e+g*t};if(!i){var s=Z(e),a={},u,c,l,d,h;if(n===!0&&(r=1)&&(n=null),s)e={p:e},t={p:t};else if(ne(e)&&!ne(t)){for(l=[],d=e.length,h=d-2,c=1;c<d;c++)l.push(o(e[c-1],e[c]));d--,i=function(v){v*=d;var _=Math.min(h,~~v);return l[_](v-_)},n=t}else r||(e=Ze(ne(e)?[]:{},e));if(!l){for(u in t)Vn.call(a,e,u,"get",t[u]);i=function(v){return jn(v,a)||(s?e.p:e)}}}return Ge(n,i)},gr=function(e,t,n){var r=e.labels,i=ge,s,a,u;for(s in r)a=r[s]-t,a<0==!!n&&a&&i>(a=Math.abs(a))&&(u=s,i=a);return u},fe=function(e,t,n){var r=e.vars,i=r[t],s=W,a=e._ctx,u,c,l;if(i)return u=r[t+"Params"],c=r.callbackScope||e,n&&Fe.length&&Yt(),a&&(W=a),l=u?i.apply(c,u):i.call(c),W=s,l},Tt=function(e){return Ue(e),e.scrollTrigger&&e.scrollTrigger.kill(!!te),e.progress()<1&&fe(e,"onInterrupt"),e},ot,mo=[],vo=function(e){if(e)if(e=!e.name&&e.default||e,zn()||e.headless){var t=e.name,n=Y(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:Mt,render:jn,add:Vn,kill:xs,modifier:Ts,rawVars:0},s={targetTest:0,get:0,getSetter:$n,aliases:{},register:0};if(_t(),e!==r){if(le[t])return;ve(r,ve(Vt(e,i),s)),Ze(r.prototype,Ze(i,Vt(e,s))),le[r.prop=t]=r,e.targetTest&&(Gt.push(r),qn[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Jr(t,r),e.register&&e.register(ue,r,se)}else mo.push(e)},F=255,xt={aqua:[0,F,F],lime:[0,F,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,F],navy:[0,0,128],white:[F,F,F],olive:[128,128,0],yellow:[F,F,0],orange:[F,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[F,0,0],pink:[F,192,203],cyan:[0,F,F],transparent:[F,F,F,0]},ln=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*F+.5|0},yo=function(e,t,n){var r=e?De(e)?[e>>16,e>>8&F,e&F]:0:xt.black,i,s,a,u,c,l,d,h,g,v;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),xt[e])r=xt[e];else if(e.charAt(0)==="#"){if(e.length<6&&(i=e.charAt(1),s=e.charAt(2),a=e.charAt(3),e="#"+i+i+s+s+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&F,r&F,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&F,e&F]}else if(e.substr(0,3)==="hsl"){if(r=v=e.match(xn),!t)u=+r[0]%360/360,c=+r[1]/100,l=+r[2]/100,s=l<=.5?l*(c+1):l+c-l*c,i=l*2-s,r.length>3&&(r[3]*=1),r[0]=ln(u+1/3,i,s),r[1]=ln(u,i,s),r[2]=ln(u-1/3,i,s);else if(~e.indexOf("="))return r=e.match(Xr),n&&r.length<4&&(r[3]=1),r}else r=e.match(xn)||xt.transparent;r=r.map(Number)}return t&&!v&&(i=r[0]/F,s=r[1]/F,a=r[2]/F,d=Math.max(i,s,a),h=Math.min(i,s,a),l=(d+h)/2,d===h?u=c=0:(g=d-h,c=l>.5?g/(2-d-h):g/(d+h),u=d===i?(s-a)/g+(s<a?6:0):d===s?(a-i)/g+2:(i-s)/g+4,u*=60),r[0]=~~(u+.5),r[1]=~~(c*100+.5),r[2]=~~(l*100+.5)),n&&r.length<4&&(r[3]=1),r},bo=function(e){var t=[],n=[],r=-1;return e.split(Le).forEach(function(i){var s=i.match(rt)||[];t.push.apply(t,s),n.push(r+=s.length+1)}),t.c=n,t},mr=function(e,t,n){var r="",i=(e+r).match(Le),s=t?"hsla(":"rgba(",a=0,u,c,l,d;if(!i)return e;if(i=i.map(function(h){return(h=yo(h,t,1))&&s+(t?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),n&&(l=bo(e),u=n.c,u.join(r)!==l.c.join(r)))for(c=e.replace(Le,"1").split(rt),d=c.length-1;a<d;a++)r+=c[a]+(~u.indexOf(a)?i.shift()||s+"0,0,0,0)":(l.length?l:i.length?i:n).shift());if(!c)for(c=e.split(Le),d=c.length-1;a<d;a++)r+=c[a]+i[a];return r+c[d]},Le=function(){var o="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in xt)o+="|"+e+"\\b";return new RegExp(o+")","gi")}(),as=/hsl[a]?\(/,To=function(e){var t=e.join(" "),n;if(Le.lastIndex=0,Le.test(t))return n=as.test(t),e[1]=mr(e[1],n),e[0]=mr(e[0],n,bo(e[1])),!0},Pt,de=function(){var o=Date.now,e=500,t=33,n=o(),r=n,i=1e3/240,s=i,a=[],u,c,l,d,h,g,v=function _(p){var f=o()-r,S=p===!0,b,E,C,m;if((f>e||f<0)&&(n+=f-t),r+=f,C=r-n,b=C-s,(b>0||S)&&(m=++d.frame,h=C-d.time*1e3,d.time=C=C/1e3,s+=b+(b>=i?4:i-b),E=1),S||(u=c(_)),E)for(g=0;g<a.length;g++)a[g](C,h,m,p)};return d={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(p){return h/(1e3/(p||60))},wake:function(){Zr&&(!Sn&&zn()&&(Se=Sn=window,Gn=Se.document||{},_e.gsap=ue,(Se.gsapVersions||(Se.gsapVersions=[])).push(ue.version),Qr(Ht||Se.GreenSockGlobals||!Se.gsap&&Se||{}),mo.forEach(vo)),l=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&d.sleep(),c=l||function(p){return setTimeout(p,s-d.time*1e3+1|0)},Pt=1,v(2))},sleep:function(){(l?cancelAnimationFrame:clearTimeout)(u),Pt=0,c=Mt},lagSmoothing:function(p,f){e=p||1/0,t=Math.min(f||33,e)},fps:function(p){i=1e3/(p||240),s=d.time*1e3+i},add:function(p,f,S){var b=f?function(E,C,m,T){p(E,C,m,T),d.remove(b)}:p;return d.remove(p),a[S?"unshift":"push"](b),_t(),b},remove:function(p,f){~(f=a.indexOf(p))&&a.splice(f,1)&&g>=f&&g--},_listeners:a},d}(),_t=function(){return!Pt&&de.wake()},R={},us=/^[\d.\-M][\d.\-,\s]/,cs=/["']/g,ls=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),r=n[0],i=1,s=n.length,a,u,c;i<s;i++)u=n[i],a=i!==s-1?u.lastIndexOf(","):u.length,c=u.substr(0,a),t[r]=isNaN(c)?c.replace(cs,"").trim():+c,r=u.substr(a+1).trim();return t},ds=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},fs=function(e){var t=(e+"").split("("),n=R[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[ls(t[1])]:ds(e).split(",").map(ro)):R._CE&&us.test(e)?R._CE("",e):n},xo=function(e){return function(t){return 1-e(1-t)}},So=function o(e,t){for(var n=e._first,r;n;)n instanceof re?o(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?o(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},$e=function(e,t){return e&&(Y(e)?e:R[e]||fs(e))||t},et=function(e,t,n,r){n===void 0&&(n=function(u){return 1-t(1-u)}),r===void 0&&(r=function(u){return u<.5?t(u*2)/2:1-t((1-u)*2)/2});var i={easeIn:t,easeOut:n,easeInOut:r},s;return ie(e,function(a){R[a]=_e[a]=i,R[s=a.toLowerCase()]=n;for(var u in i)R[s+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=R[a+"."+u]=i[u]}),i},Co=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},dn=function o(e,t,n){var r=t>=1?t:1,i=(n||(e?.3:.45))/(t<1?t:1),s=i/Tn*(Math.asin(1/r)||0),a=function(l){return l===1?1:r*Math.pow(2,-10*l)*zi((l-s)*i)+1},u=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:Co(a);return i=Tn/i,u.config=function(c,l){return o(e,c,l)},u},fn=function o(e,t){t===void 0&&(t=1.70158);var n=function(s){return s?--s*s*((t+1)*s+t)+1:0},r=e==="out"?n:e==="in"?function(i){return 1-n(1-i)}:Co(n);return r.config=function(i){return o(e,i)},r};ie("Linear,Quad,Cubic,Quart,Quint,Strong",function(o,e){var t=e<5?e+1:e;et(o+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});R.Linear.easeNone=R.none=R.Linear.easeIn;et("Elastic",dn("in"),dn("out"),dn());(function(o,e){var t=1/e,n=2*t,r=2.5*t,i=function(a){return a<t?o*a*a:a<n?o*Math.pow(a-1.5/e,2)+.75:a<r?o*(a-=2.25/e)*a+.9375:o*Math.pow(a-2.625/e,2)+.984375};et("Bounce",function(s){return 1-i(1-s)},i)})(7.5625,2.75);et("Expo",function(o){return o?Math.pow(2,10*(o-1)):0});et("Circ",function(o){return-(Vr(1-o*o)-1)});et("Sine",function(o){return o===1?1:-Ui(o*Fi)+1});et("Back",fn("in"),fn("out"),fn());R.SteppedEase=R.steps=_e.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0,s=1-U;return function(a){return((r*Bt(0,s,a)|0)+i)*n}}};dt.ease=R["quad.out"];ie("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(o){return Hn+=o+","+o+"Params,"});var Eo=function(e,t){this.id=Li++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:to,this.set=t?t.getSetter:$n},It=function(){function o(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,ht(this,+t.duration,1,1),this.data=t.data,W&&(this._ctx=W,W.data.push(this)),Pt||de.wake()}var e=o.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,ht(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(_t(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(en(this,n),!i._dp||i.parent||so(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Ce(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===U||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),no(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+_r(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+_r(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,r){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*i,r):this._repeat?ft(this._tTime,i)+1:1},e.timeScale=function(n,r){if(!arguments.length)return this._rts===-U?0:this._rts;if(this._rts===n)return this;var i=this.parent&&this._ts?Kt(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-U?0:this._rts,this.totalTime(Bt(-Math.abs(this._delay),this._tDur,i),r!==!1),Jt(this),Ki(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_t(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==U&&(this._tTime-=U)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Ce(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(oe(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Kt(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=qi);var r=te;return te=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),te=r,this},e.globalTime=function(n){for(var r=this,i=arguments.length?n:r.rawTime();r;)i=r._start+i/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):i},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,pr(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,pr(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(pe(this,n),oe(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,oe(r))},e.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-U:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-U,this},e.isActive=function(){var n=this.parent||this._dp,r=this._start,i;return!!(!n||this._ts&&this._initted&&n.isActive()&&(i=n.rawTime(!0))>=r&&i<this.endTime(!0)-U)},e.eventCallback=function(n,r,i){var s=this.vars;return arguments.length>1?(r?(s[n]=r,i&&(s[n+"Params"]=i),n==="onUpdate"&&(this._onUpdate=r)):delete s[n],this):s[n]},e.then=function(n){var r=this;return new Promise(function(i){var s=Y(n)?n:oo,a=function(){var c=r.then;r.then=null,Y(s)&&(s=s(r))&&(s.then||s===r)&&(r.then=c),i(s),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Tt(this)},o}();ve(It.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-U,_prom:0,_ps:!1,_rts:1});var re=function(o){Yr(e,o);function e(n,r){var i;return n===void 0&&(n={}),i=o.call(this,n)||this,i.labels={},i.smoothChildTiming=!!n.smoothChildTiming,i.autoRemoveChildren=!!n.autoRemoveChildren,i._sort=oe(n.sortChildren),q&&Ce(n.parent||q,Ne(i),r),n.reversed&&i.reverse(),n.paused&&i.paused(!0),n.scrollTrigger&&ao(Ne(i),n.scrollTrigger),i}var t=e.prototype;return t.to=function(r,i,s){return wt(0,arguments,this),this},t.from=function(r,i,s){return wt(1,arguments,this),this},t.fromTo=function(r,i,s,a){return wt(2,arguments,this),this},t.set=function(r,i,s){return i.duration=0,i.parent=this,At(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new K(r,i,pe(this,s),1),this},t.call=function(r,i,s){return Ce(this,K.delayedCall(0,r,i),s)},t.staggerTo=function(r,i,s,a,u,c,l){return s.duration=i,s.stagger=s.stagger||a,s.onComplete=c,s.onCompleteParams=l,s.parent=this,new K(r,s,pe(this,u)),this},t.staggerFrom=function(r,i,s,a,u,c,l){return s.runBackwards=1,At(s).immediateRender=oe(s.immediateRender),this.staggerTo(r,i,s,a,u,c,l)},t.staggerFromTo=function(r,i,s,a,u,c,l,d){return a.startAt=s,At(a).immediateRender=oe(a.immediateRender),this.staggerTo(r,i,a,u,c,l,d)},t.render=function(r,i,s){var a=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,l=r<=0?0:j(r),d=this._zTime<0!=r<0&&(this._initted||!c),h,g,v,_,p,f,S,b,E,C,m,T;if(this!==q&&l>u&&r>=0&&(l=u),l!==this._tTime||s||d){if(a!==this._time&&c&&(l+=this._time-a,r+=this._time-a),h=l,E=this._start,b=this._ts,f=!b,d&&(c||(a=this._zTime),(r||!i)&&(this._zTime=r)),this._repeat){if(m=this._yoyo,p=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(p*100+r,i,s);if(h=j(l%p),l===u?(_=this._repeat,h=c):(_=~~(l/p),_&&_===l/p&&(h=c,_--),h>c&&(h=c)),C=ft(this._tTime,p),!a&&this._tTime&&C!==_&&this._tTime-C*p-this._dur<=0&&(C=_),m&&_&1&&(h=c-h,T=1),_!==C&&!this._lock){var y=m&&C&1,x=y===(m&&_&1);if(_<C&&(y=!y),a=y?0:l%c?c:l,this._lock=1,this.render(a||(T?0:j(_*p)),i,!c)._lock=0,this._tTime=l,!i&&this.parent&&fe(this,"onRepeat"),this.vars.repeatRefresh&&!T&&(this.invalidate()._lock=1),a&&a!==this._time||f!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,x&&(this._lock=2,a=y?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!T&&this.invalidate()),this._lock=0,!this._ts&&!f)return this;So(this,T)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=Zi(this,j(a),j(h)),S&&(l-=h-(h=S._start))),this._tTime=l,this._time=h,this._act=!b,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&h&&!i&&!_&&(fe(this,"onStart"),this._tTime!==l))return this;if(h>=a&&r>=0)for(g=this._first;g;){if(v=g._next,(g._act||h>=g._start)&&g._ts&&S!==g){if(g.parent!==this)return this.render(r,i,s);if(g.render(g._ts>0?(h-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(h-g._start)*g._ts,i,s),h!==this._time||!this._ts&&!f){S=0,v&&(l+=this._zTime=-U);break}}g=v}else{g=this._last;for(var A=r<0?r:h;g;){if(v=g._prev,(g._act||A<=g._end)&&g._ts&&S!==g){if(g.parent!==this)return this.render(r,i,s);if(g.render(g._ts>0?(A-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(A-g._start)*g._ts,i,s||te&&(g._initted||g._startAt)),h!==this._time||!this._ts&&!f){S=0,v&&(l+=this._zTime=A?-U:U);break}}g=v}}if(S&&!i&&(this.pause(),S.render(h>=a?0:-U)._zTime=h>=a?1:-1,this._ts))return this._start=E,Jt(this),this.render(r,i,s);this._onUpdate&&!i&&fe(this,"onUpdate",!0),(l===u&&this._tTime>=this.totalDuration()||!l&&a)&&(E===this._start||Math.abs(b)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(l===u&&this._ts>0||!l&&this._ts<0)&&Ue(this,1),!i&&!(r<0&&!a)&&(l||a||!u)&&(fe(this,l===u&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(l<u&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,i){var s=this;if(De(i)||(i=pe(this,i,r)),!(r instanceof It)){if(ne(r))return r.forEach(function(a){return s.add(a,i)}),this;if(Z(r))return this.addLabel(r,i);if(Y(r))r=K.delayedCall(0,r);else return this}return this!==r?Ce(this,r,i):this},t.getChildren=function(r,i,s,a){r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=!0),a===void 0&&(a=-ge);for(var u=[],c=this._first;c;)c._start>=a&&(c instanceof K?i&&u.push(c):(s&&u.push(c),r&&u.push.apply(u,c.getChildren(!0,i,s)))),c=c._next;return u},t.getById=function(r){for(var i=this.getChildren(1,1,1),s=i.length;s--;)if(i[s].vars.id===r)return i[s]},t.remove=function(r){return Z(r)?this.removeLabel(r):Y(r)?this.killTweensOf(r):(Qt(this,r),r===this._recent&&(this._recent=this._last),Xe(this))},t.totalTime=function(r,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=j(de.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),o.prototype.totalTime.call(this,r,i),this._forcing=0,this):this._tTime},t.addLabel=function(r,i){return this.labels[r]=pe(this,i),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,i,s){var a=K.delayedCall(0,i||Mt,s);return a.data="isPause",this._hasPause=1,Ce(this,a,pe(this,r))},t.removePause=function(r){var i=this._first;for(r=pe(this,r);i;)i._start===r&&i.data==="isPause"&&Ue(i),i=i._next},t.killTweensOf=function(r,i,s){for(var a=this.getTweensOf(r,s),u=a.length;u--;)Re!==a[u]&&a[u].kill(r,i);return this},t.getTweensOf=function(r,i){for(var s=[],a=me(r),u=this._first,c=De(i),l;u;)u instanceof K?Hi(u._targets,a)&&(c?(!Re||u._initted&&u._ts)&&u.globalTime(0)<=i&&u.globalTime(u.totalDuration())>i:!i||u.isActive())&&s.push(u):(l=u.getTweensOf(a,i)).length&&s.push.apply(s,l),u=u._next;return s},t.tweenTo=function(r,i){i=i||{};var s=this,a=pe(s,r),u=i,c=u.startAt,l=u.onStart,d=u.onStartParams,h=u.immediateRender,g,v=K.to(s,ve({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:i.duration||Math.abs((a-(c&&"time"in c?c.time:s._time))/s.timeScale())||U,onStart:function(){if(s.pause(),!g){var p=i.duration||Math.abs((a-(c&&"time"in c?c.time:s._time))/s.timeScale());v._dur!==p&&ht(v,p,0,1).render(v._time,!0,!0),g=1}l&&l.apply(v,d||[])}},i));return h?v.render(0):v},t.tweenFromTo=function(r,i,s){return this.tweenTo(i,ve({startAt:{time:pe(this,r)}},s))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),gr(this,pe(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),gr(this,pe(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+U)},t.shiftChildren=function(r,i,s){s===void 0&&(s=0);for(var a=this._first,u=this.labels,c;a;)a._start>=s&&(a._start+=r,a._end+=r),a=a._next;if(i)for(c in u)u[c]>=s&&(u[c]+=r);return Xe(this)},t.invalidate=function(r){var i=this._first;for(this._lock=0;i;)i.invalidate(r),i=i._next;return o.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var i=this._first,s;i;)s=i._next,this.remove(i),i=s;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Xe(this)},t.totalDuration=function(r){var i=0,s=this,a=s._last,u=ge,c,l,d;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-r:r));if(s._dirty){for(d=s.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),l=a._start,l>u&&s._sort&&a._ts&&!s._lock?(s._lock=1,Ce(s,a,l-a._delay,1)._lock=0):u=l,l<0&&a._ts&&(i-=l,(!d&&!s._dp||d&&d.smoothChildTiming)&&(s._start+=l/s._ts,s._time-=l,s._tTime-=l),s.shiftChildren(-l,!1,-1/0),u=0),a._end>i&&a._ts&&(i=a._end),a=c;ht(s,s===q&&s._time>i?s._time:i,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(r){if(q._ts&&(no(q,Kt(r,q)),eo=de.frame),de.frame>=fr){fr+=he.autoSleep||120;var i=q._first;if((!i||!i._ts)&&he.autoSleep&&de._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||de.sleep()}}},e}(It);ve(re.prototype,{_lock:0,_hasPause:0,_forcing:0});var hs=function(e,t,n,r,i,s,a){var u=new se(this._pt,e,t,0,1,Do,null,i),c=0,l=0,d,h,g,v,_,p,f,S;for(u.b=n,u.e=r,n+="",r+="",(f=~r.indexOf("random("))&&(r=Dt(r)),s&&(S=[n,r],s(S,e,t),n=S[0],r=S[1]),h=n.match(un)||[];d=un.exec(r);)v=d[0],_=r.substring(c,d.index),g?g=(g+1)%5:_.substr(-5)==="rgba("&&(g=1),v!==h[l++]&&(p=parseFloat(h[l-1])||0,u._pt={_next:u._pt,p:_||l===1?_:",",s:p,c:v.charAt(1)==="="?st(p,v)-p:parseFloat(v)-p,m:g&&g<4?Math.round:0},c=un.lastIndex);return u.c=c<r.length?r.substring(c,r.length):"",u.fp=a,($r.test(r)||f)&&(u.e=0),this._pt=u,u},Vn=function(e,t,n,r,i,s,a,u,c,l){Y(r)&&(r=r(i||0,e,s));var d=e[t],h=n!=="get"?n:Y(d)?c?e[t.indexOf("set")||!Y(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():d,g=Y(d)?c?vs:No:Xn,v;if(Z(r)&&(~r.indexOf("random(")&&(r=Dt(r)),r.charAt(1)==="="&&(v=st(h,r)+(ee(h)||0),(v||v===0)&&(r=v))),!l||h!==r||Mn)return!isNaN(h*r)&&r!==""?(v=new se(this._pt,e,t,+h||0,r-(h||0),typeof d=="boolean"?bs:Mo,0,g),c&&(v.fp=c),a&&v.modifier(a,this,e),this._pt=v):(!d&&!(t in e)&&Wn(t,r),hs.call(this,e,t,h,r,g,u||he.stringFilter,c))},_s=function(e,t,n,r,i){if(Y(e)&&(e=Ot(e,i,t,n,r)),!we(e)||e.style&&e.nodeType||ne(e)||Kr(e))return Z(e)?Ot(e,i,t,n,r):e;var s={},a;for(a in e)s[a]=Ot(e[a],i,t,n,r);return s},Ao=function(e,t,n,r,i,s){var a,u,c,l;if(le[e]&&(a=new le[e]).init(i,a.rawVars?t[e]:_s(t[e],r,i,s,n),n,r,s)!==!1&&(n._pt=u=new se(n._pt,i,e,0,1,a.render,a,0,a.priority),n!==ot))for(c=n._ptLookup[n._targets.indexOf(i)],l=a._props.length;l--;)c[a._props[l]]=u;return a},Re,Mn,Kn=function o(e,t,n){var r=e.vars,i=r.ease,s=r.startAt,a=r.immediateRender,u=r.lazy,c=r.onUpdate,l=r.runBackwards,d=r.yoyoEase,h=r.keyframes,g=r.autoRevert,v=e._dur,_=e._startAt,p=e._targets,f=e.parent,S=f&&f.data==="nested"?f.vars.targets:p,b=e._overwrite==="auto"&&!Ln,E=e.timeline,C,m,T,y,x,A,w,M,P,L,G,k,z;if(E&&(!h||!i)&&(i="none"),e._ease=$e(i,dt.ease),e._yEase=d?xo($e(d===!0?i:d,dt.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!E&&!!r.runBackwards,!E||h&&!r.stagger){if(M=p[0]?Ke(p[0]).harness:0,k=M&&r[M.prop],C=Vt(r,qn),_&&(_._zTime<0&&_.progress(1),t<0&&l&&a&&!g?_.render(-1,!0):_.revert(l&&v?zt:Wi),_._lazy=0),s){if(Ue(e._startAt=K.set(p,ve({data:"isStart",overwrite:!1,parent:f,immediateRender:!0,lazy:!_&&oe(u),startAt:null,delay:0,onUpdate:c&&function(){return fe(e,"onUpdate")},stagger:0},s))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(te||!a&&!g)&&e._startAt.revert(zt),a&&v&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(l&&v&&!_){if(t&&(a=!1),T=ve({overwrite:!1,data:"isFromStart",lazy:a&&!_&&oe(u),immediateRender:a,stagger:0,parent:f},C),k&&(T[M.prop]=k),Ue(e._startAt=K.set(p,T)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(te?e._startAt.revert(zt):e._startAt.render(-1,!0)),e._zTime=t,!a)o(e._startAt,U,U);else if(!t)return}for(e._pt=e._ptCache=0,u=v&&oe(u)||u&&!v,m=0;m<p.length;m++){if(x=p[m],w=x._gsap||Yn(p)[m]._gsap,e._ptLookup[m]=L={},Cn[w.id]&&Fe.length&&Yt(),G=S===p?m:S.indexOf(x),M&&(P=new M).init(x,k||C,e,G,S)!==!1&&(e._pt=y=new se(e._pt,x,P.name,0,1,P.render,P,0,P.priority),P._props.forEach(function(X){L[X]=y}),P.priority&&(A=1)),!M||k)for(T in C)le[T]&&(P=Ao(T,C,e,G,x,S))?P.priority&&(A=1):L[T]=y=Vn.call(e,x,T,"get",C[T],G,S,0,r.stringFilter);e._op&&e._op[m]&&e.kill(x,e._op[m]),b&&e._pt&&(Re=e,q.killTweensOf(x,L,e.globalTime(t)),z=!e.parent,Re=0),e._pt&&u&&(Cn[w.id]=1)}A&&Po(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!z,h&&t<=0&&E.render(ge,!0,!0)},ps=function(e,t,n,r,i,s,a,u){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],l,d,h,g;if(!c)for(c=e._ptCache[t]=[],h=e._ptLookup,g=e._targets.length;g--;){if(l=h[g][t],l&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return Mn=1,e.vars[t]="+=0",Kn(e,a),Mn=0,u?Nt(t+" not eligible for reset"):1;c.push(l)}for(g=c.length;g--;)d=c[g],l=d._pt||d,l.s=(r||r===0)&&!i?r:l.s+(r||0)+s*l.c,l.c=n-l.s,d.e&&(d.e=V(n)+ee(d.e)),d.b&&(d.b=l.s+ee(d.b))},gs=function(e,t){var n=e[0]?Ke(e[0]).harness:0,r=n&&n.aliases,i,s,a,u;if(!r)return t;i=Ze({},t);for(s in r)if(s in i)for(u=r[s].split(","),a=u.length;a--;)i[u[a]]=i[s];return i},ms=function(e,t,n,r){var i=t.ease||r||"power1.inOut",s,a;if(ne(t))a=n[e]||(n[e]=[]),t.forEach(function(u,c){return a.push({t:c/(t.length-1)*100,v:u,e:i})});else for(s in t)a=n[s]||(n[s]=[]),s==="ease"||a.push({t:parseFloat(e),v:t[s],e:i})},Ot=function(e,t,n,r,i){return Y(e)?e.call(t,n,r,i):Z(e)&&~e.indexOf("random(")?Dt(e):e},wo=Hn+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Oo={};ie(wo+",id,stagger,delay,duration,paused,scrollTrigger",function(o){return Oo[o]=1});var K=function(o){Yr(e,o);function e(n,r,i,s){var a;typeof r=="number"&&(i.duration=r,r=i,i=null),a=o.call(this,s?r:At(r))||this;var u=a.vars,c=u.duration,l=u.delay,d=u.immediateRender,h=u.stagger,g=u.overwrite,v=u.keyframes,_=u.defaults,p=u.scrollTrigger,f=u.yoyoEase,S=r.parent||q,b=(ne(n)||Kr(n)?De(n[0]):"length"in r)?[n]:me(n),E,C,m,T,y,x,A,w;if(a._targets=b.length?Yn(b):Nt("GSAP target "+n+" not found. https://gsap.com",!he.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=g,v||h||Ut(c)||Ut(l)){if(r=a.vars,E=a.timeline=new re({data:"nested",defaults:_||{},targets:S&&S.data==="nested"?S.vars.targets:b}),E.kill(),E.parent=E._dp=Ne(a),E._start=0,h||Ut(c)||Ut(l)){if(T=b.length,A=h&&fo(h),we(h))for(y in h)~wo.indexOf(y)&&(w||(w={}),w[y]=h[y]);for(C=0;C<T;C++)m=Vt(r,Oo),m.stagger=0,f&&(m.yoyoEase=f),w&&Ze(m,w),x=b[C],m.duration=+Ot(c,Ne(a),C,x,b),m.delay=(+Ot(l,Ne(a),C,x,b)||0)-a._delay,!h&&T===1&&m.delay&&(a._delay=l=m.delay,a._start+=l,m.delay=0),E.to(x,m,A?A(C,x,b):0),E._ease=R.none;E.duration()?c=l=0:a.timeline=0}else if(v){At(ve(E.vars.defaults,{ease:"none"})),E._ease=$e(v.ease||r.ease||"none");var M=0,P,L,G;if(ne(v))v.forEach(function(k){return E.to(b,k,">")}),E.duration();else{m={};for(y in v)y==="ease"||y==="easeEach"||ms(y,v[y],m,v.easeEach);for(y in m)for(P=m[y].sort(function(k,z){return k.t-z.t}),M=0,C=0;C<P.length;C++)L=P[C],G={ease:L.e,duration:(L.t-(C?P[C-1].t:0))/100*c},G[y]=L.v,E.to(b,G,M),M+=G.duration;E.duration()<c&&E.to({},{duration:c-E.duration()})}}c||a.duration(c=E.duration())}else a.timeline=0;return g===!0&&!Ln&&(Re=Ne(a),q.killTweensOf(b),Re=0),Ce(S,Ne(a),i),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(d||!c&&!v&&a._start===j(S._time)&&oe(d)&&Xi(Ne(a))&&S.data!=="nested")&&(a._tTime=-U,a.render(Math.max(0,-l)||0)),p&&ao(Ne(a),p),a}var t=e.prototype;return t.render=function(r,i,s){var a=this._time,u=this._tDur,c=this._dur,l=r<0,d=r>u-U&&!l?u:r<U?0:r,h,g,v,_,p,f,S,b,E;if(!c)ji(this,r,i,s);else if(d!==this._tTime||!r||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==l){if(h=d,b=this.timeline,this._repeat){if(_=c+this._rDelay,this._repeat<-1&&l)return this.totalTime(_*100+r,i,s);if(h=j(d%_),d===u?(v=this._repeat,h=c):(v=~~(d/_),v&&v===j(d/_)&&(h=c,v--),h>c&&(h=c)),f=this._yoyo&&v&1,f&&(E=this._yEase,h=c-h),p=ft(this._tTime,_),h===a&&!s&&this._initted&&v===p)return this._tTime=d,this;v!==p&&(b&&this._yEase&&So(b,f),this.vars.repeatRefresh&&!f&&!this._lock&&this._time!==_&&this._initted&&(this._lock=s=1,this.render(j(_*v),!0).invalidate()._lock=0))}if(!this._initted){if(uo(this,l?r:h,s,i,d))return this._tTime=0,this;if(a!==this._time&&!(s&&this.vars.repeatRefresh&&v!==p))return this;if(c!==this._dur)return this.render(r,i,s)}if(this._tTime=d,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(E||this._ease)(h/c),this._from&&(this.ratio=S=1-S),h&&!a&&!i&&!v&&(fe(this,"onStart"),this._tTime!==d))return this;for(g=this._pt;g;)g.r(S,g.d),g=g._next;b&&b.render(r<0?r:b._dur*b._ease(h/this._dur),i,s)||this._startAt&&(this._zTime=r),this._onUpdate&&!i&&(l&&En(this,r,i,s),fe(this,"onUpdate")),this._repeat&&v!==p&&this.vars.onRepeat&&!i&&this.parent&&fe(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(l&&!this._onUpdate&&En(this,r,!0,!0),(r||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Ue(this,1),!i&&!(l&&!a)&&(d||a||f)&&(fe(this,d===u?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),o.prototype.invalidate.call(this,r)},t.resetTo=function(r,i,s,a,u){Pt||de.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),l;return this._initted||Kn(this,c),l=this._ease(c/this._dur),ps(this,r,i,s,a,l,c,u)?this.resetTo(r,i,s,a,1):(en(this,0),this.parent||io(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,i){if(i===void 0&&(i="all"),!r&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?Tt(this):this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(r,i,Re&&Re.vars.overwrite!==!0)._first||Tt(this),this.parent&&s!==this.timeline.totalDuration()&&ht(this,this._dur*this.timeline._tDur/s,0,1),this}var a=this._targets,u=r?me(r):a,c=this._ptLookup,l=this._pt,d,h,g,v,_,p,f;if((!i||i==="all")&&Vi(a,u))return i==="all"&&(this._pt=0),Tt(this);for(d=this._op=this._op||[],i!=="all"&&(Z(i)&&(_={},ie(i,function(S){return _[S]=1}),i=_),i=gs(a,i)),f=a.length;f--;)if(~u.indexOf(a[f])){h=c[f],i==="all"?(d[f]=i,v=h,g={}):(g=d[f]=d[f]||{},v=i);for(_ in v)p=h&&h[_],p&&((!("kill"in p.d)||p.d.kill(_)===!0)&&Qt(this,p,"_pt"),delete h[_]),g!=="all"&&(g[_]=1)}return this._initted&&!this._pt&&l&&Tt(this),this},e.to=function(r,i){return new e(r,i,arguments[2])},e.from=function(r,i){return wt(1,arguments)},e.delayedCall=function(r,i,s,a){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:i,onReverseComplete:i,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:a})},e.fromTo=function(r,i,s){return wt(2,arguments)},e.set=function(r,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(r,i)},e.killTweensOf=function(r,i,s){return q.killTweensOf(r,i,s)},e}(It);ve(K.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ie("staggerTo,staggerFrom,staggerFromTo",function(o){K[o]=function(){var e=new re,t=wn.call(arguments,0);return t.splice(o==="staggerFromTo"?5:4,0,0),e[o].apply(e,t)}});var Xn=function(e,t,n){return e[t]=n},No=function(e,t,n){return e[t](n)},vs=function(e,t,n,r){return e[t](r.fp,n)},ys=function(e,t,n){return e.setAttribute(t,n)},$n=function(e,t){return Y(e[t])?No:Un(e[t])&&e.setAttribute?ys:Xn},Mo=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},bs=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Do=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},jn=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Ts=function(e,t,n,r){for(var i=this._pt,s;i;)s=i._next,i.p===r&&i.modifier(e,t,n),i=s},xs=function(e){for(var t=this._pt,n,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?Qt(this,t,"_pt"):t.dep||(n=1),t=r;return!n},Ss=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},Po=function(e){for(var t=e._pt,n,r,i,s;t;){for(n=t._next,r=i;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:s)?t._prev._next=t:i=t,(t._next=r)?r._prev=t:s=t,t=n}e._pt=i},se=function(){function o(t,n,r,i,s,a,u,c,l){this.t=n,this.s=i,this.c=s,this.p=r,this.r=a||Mo,this.d=u||this,this.set=c||Xn,this.pr=l||0,this._next=t,t&&(t._prev=this)}var e=o.prototype;return e.modifier=function(n,r,i){this.mSet=this.mSet||this.set,this.set=Ss,this.m=n,this.mt=i,this.tween=r},o}();ie(Hn+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(o){return qn[o]=1});_e.TweenMax=_e.TweenLite=K;_e.TimelineLite=_e.TimelineMax=re;q=new re({sortChildren:!1,defaults:dt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});he.stringFilter=To;var je=[],Wt={},Cs=[],vr=0,Es=0,hn=function(e){return(Wt[e]||Cs).map(function(t){return t()})},Dn=function(){var e=Date.now(),t=[];e-vr>2&&(hn("matchMediaInit"),je.forEach(function(n){var r=n.queries,i=n.conditions,s,a,u,c;for(a in r)s=Se.matchMedia(r[a]).matches,s&&(u=1),s!==i[a]&&(i[a]=s,c=1);c&&(n.revert(),u&&t.push(n))}),hn("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),vr=e,hn("matchMedia"))},Io=function(){function o(t,n){this.selector=n&&On(n),this.data=[],this._r=[],this.isReverted=!1,this.id=Es++,t&&this.add(t)}var e=o.prototype;return e.add=function(n,r,i){Y(n)&&(i=r,r=n,n=Y);var s=this,a=function(){var c=W,l=s.selector,d;return c&&c!==s&&c.data.push(s),i&&(s.selector=On(i)),W=s,d=r.apply(s,arguments),Y(d)&&s._r.push(d),W=c,s.selector=l,s.isReverted=!1,d};return s.last=a,n===Y?a(s,function(u){return s.add(null,u)}):n?s[n]=a:a},e.ignore=function(n){var r=W;W=null,n(this),W=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof o?n.push.apply(n,r.getTweens()):r instanceof K&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var i=this;if(n?function(){for(var a=i.getTweens(),u=i.data.length,c;u--;)c=i.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(l){return a.splice(a.indexOf(l),1)}));for(a.map(function(l){return{g:l._dur||l._delay||l._sat&&!l._sat.vars.immediateRender?l.globalTime(0):-1/0,t:l}}).sort(function(l,d){return d.g-l.g||-1/0}).forEach(function(l){return l.t.revert(n)}),u=i.data.length;u--;)c=i.data[u],c instanceof re?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof K)&&c.revert&&c.revert(n);i._r.forEach(function(l){return l(n,i)}),i.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var s=je.length;s--;)je[s].id===this.id&&je.splice(s,1)},e.revert=function(n){this.kill(n||{})},o}(),As=function(){function o(t){this.contexts=[],this.scope=t,W&&W.data.push(this)}var e=o.prototype;return e.add=function(n,r,i){we(n)||(n={matches:n});var s=new Io(0,i||this.scope),a=s.conditions={},u,c,l;W&&!s.selector&&(s.selector=W.selector),this.contexts.push(s),r=s.add("onMatch",r),s.queries=n;for(c in n)c==="all"?l=1:(u=Se.matchMedia(n[c]),u&&(je.indexOf(s)<0&&je.push(s),(a[c]=u.matches)&&(l=1),u.addListener?u.addListener(Dn):u.addEventListener("change",Dn)));return l&&r(s,function(d){return s.add(null,d)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},o}(),Xt={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return vo(r)})},timeline:function(e){return new re(e)},getTweensOf:function(e,t){return q.getTweensOf(e,t)},getProperty:function(e,t,n,r){Z(e)&&(e=me(e)[0]);var i=Ke(e||{}).get,s=n?oo:ro;return n==="native"&&(n=""),e&&(t?s((le[t]&&le[t].get||i)(e,t,n,r)):function(a,u,c){return s((le[a]&&le[a].get||i)(e,a,u,c))})},quickSetter:function(e,t,n){if(e=me(e),e.length>1){var r=e.map(function(l){return ue.quickSetter(l,t,n)}),i=r.length;return function(l){for(var d=i;d--;)r[d](l)}}e=e[0]||{};var s=le[t],a=Ke(e),u=a.harness&&(a.harness.aliases||{})[t]||t,c=s?function(l){var d=new s;ot._pt=0,d.init(e,n?l+n:l,ot,0,[e]),d.render(1,d),ot._pt&&jn(1,ot)}:a.set(e,u);return s?c:function(l){return c(e,u,n?l+n:l,a,1)}},quickTo:function(e,t,n){var r,i=ue.to(e,Ze((r={},r[t]="+=0.1",r.paused=!0,r),n||{})),s=function(u,c,l){return i.resetTo(t,u,c,l)};return s.tween=i,s},isTweening:function(e){return q.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=$e(e.ease,dt.ease)),hr(dt,e||{})},config:function(e){return hr(he,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,s=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!le[a]&&!_e[a]&&Nt(t+" effect requires "+a+" plugin.")}),cn[t]=function(a,u,c){return n(me(a),ve(u||{},i),c)},s&&(re.prototype[t]=function(a,u,c){return this.add(cn[t](a,we(u)?u:(c=u)&&{},this),c)})},registerEase:function(e,t){R[e]=$e(t)},parseEase:function(e,t){return arguments.length?$e(e,t):R},getById:function(e){return q.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new re(e),r,i;for(n.smoothChildTiming=oe(e.smoothChildTiming),q.remove(n),n._dp=0,n._time=n._tTime=q._time,r=q._first;r;)i=r._next,(t||!(!r._dur&&r instanceof K&&r.vars.onComplete===r._targets[0]))&&Ce(n,r,r._start-r._delay),r=i;return Ce(q,n,0),n},context:function(e,t){return e?new Io(e,t):W},matchMedia:function(e){return new As(e)},matchMediaRefresh:function(){return je.forEach(function(e){var t=e.conditions,n,r;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||Dn()},addEventListener:function(e,t){var n=Wt[e]||(Wt[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=Wt[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:os,wrapYoyo:is,distribute:fo,random:_o,snap:ho,normalize:rs,getUnit:ee,clamp:Ji,splitColor:yo,toArray:me,selector:On,mapRange:go,pipe:ts,unitize:ns,interpolate:ss,shuffle:lo},install:Qr,effects:cn,ticker:de,updateRoot:re.updateRoot,plugins:le,globalTimeline:q,core:{PropTween:se,globals:Jr,Tween:K,Timeline:re,Animation:It,getCache:Ke,_removeLinkedListItem:Qt,reverting:function(){return te},context:function(e){return e&&W&&(W.data.push(e),e._ctx=W),W},suppressOverwrites:function(e){return Ln=e}}};ie("to,from,fromTo,delayedCall,set,killTweensOf",function(o){return Xt[o]=K[o]});de.add(re.updateRoot);ot=Xt.to({},{duration:0});var ws=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},Os=function(e,t){var n=e._targets,r,i,s;for(r in t)for(i=n.length;i--;)s=e._ptLookup[i][r],s&&(s=s.d)&&(s._pt&&(s=ws(s,r)),s&&s.modifier&&s.modifier(t[r],e,n[i],r))},_n=function(e,t){return{name:e,rawVars:1,init:function(r,i,s){s._onInit=function(a){var u,c;if(Z(i)&&(u={},ie(i,function(l){return u[l]=1}),i=u),t){u={};for(c in i)u[c]=t(i[c]);i=u}Os(a,i)}}}},ue=Xt.registerPlugin({name:"attr",init:function(e,t,n,r,i){var s,a,u;this.tween=n;for(s in t)u=e.getAttribute(s)||"",a=this.add(e,"setAttribute",(u||0)+"",t[s],r,i,0,0,s),a.op=s,a.b=u,this._props.push(s)},render:function(e,t){for(var n=t._pt;n;)te?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},_n("roundProps",Nn),_n("modifiers"),_n("snap",ho))||Xt;K.version=re.version=ue.version="3.12.5";Zr=1;zn()&&_t();R.Power0;R.Power1;R.Power2;R.Power3;R.Power4;R.Linear;R.Quad;R.Cubic;R.Quart;R.Quint;R.Strong;R.Elastic;R.Back;R.SteppedEase;R.Bounce;R.Sine;R.Expo;R.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var yr,ke,at,Zn,Ve,br,Qn,Ns=function(){return typeof window<"u"},Pe={},Ye=180/Math.PI,ut=Math.PI/180,nt=Math.atan2,Tr=1e8,Jn=/([A-Z])/g,Ms=/(left|right|width|margin|padding|x)/i,Ds=/[\s,\(]\S/,Ee={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Pn=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Ps=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Is=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Rs=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Ro=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},ko=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},ks=function(e,t,n){return e.style[t]=n},Bs=function(e,t,n){return e.style.setProperty(t,n)},Fs=function(e,t,n){return e._gsap[t]=n},Ls=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Us=function(e,t,n,r,i){var s=e._gsap;s.scaleX=s.scaleY=n,s.renderTransform(i,s)},zs=function(e,t,n,r,i){var s=e._gsap;s[t]=n,s.renderTransform(i,s)},H="transform",ae=H+"Origin",Gs=function o(e,t){var n=this,r=this.target,i=r.style,s=r._gsap;if(e in Pe&&i){if(this.tfm=this.tfm||{},e!=="transform")e=Ee[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return n.tfm[a]=Me(r,a)}):this.tfm[e]=s.x?s[e]:Me(r,e),e===ae&&(this.tfm.zOrigin=s.zOrigin);else return Ee.transform.split(",").forEach(function(a){return o.call(n,a,t)});if(this.props.indexOf(H)>=0)return;s.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(ae,t,"")),e=H}(i||t)&&this.props.push(e,t,i[e])},Bo=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Ws=function(){var e=this.props,t=this.target,n=t.style,r=t._gsap,i,s;for(i=0;i<e.length;i+=3)e[i+1]?t[e[i]]=e[i+2]:e[i+2]?n[e[i]]=e[i+2]:n.removeProperty(e[i].substr(0,2)==="--"?e[i]:e[i].replace(Jn,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)r[s]=this.tfm[s];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),i=Qn(),(!i||!i.isStart)&&!n[H]&&(Bo(n),r.zOrigin&&n[ae]&&(n[ae]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},Fo=function(e,t){var n={target:e,props:[],revert:Ws,save:Gs};return e._gsap||ue.core.getCache(e),t&&t.split(",").forEach(function(r){return n.save(r)}),n},Lo,In=function(e,t){var n=ke.createElementNS?ke.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ke.createElement(e);return n&&n.style?n:ke.createElement(e)},Ae=function o(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(Jn,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&o(e,pt(t)||t,1)||""},xr="O,Moz,ms,Ms,Webkit".split(","),pt=function(e,t,n){var r=t||Ve,i=r.style,s=5;if(e in i&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);s--&&!(xr[s]+e in i););return s<0?null:(s===3?"ms":s>=0?xr[s]:"")+e},Rn=function(){Ns()&&window.document&&(yr=window,ke=yr.document,at=ke.documentElement,Ve=In("div")||{style:{}},In("div"),H=pt(H),ae=H+"Origin",Ve.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Lo=!!pt("perspective"),Qn=ue.core.reverting,Zn=1)},pn=function o(e){var t=In("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,i=this.style.cssText,s;if(at.appendChild(t),t.appendChild(this),this.style.display="block",e)try{s=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=o}catch{}else this._gsapBBox&&(s=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),at.removeChild(t),this.style.cssText=i,s},Sr=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Uo=function(e){var t;try{t=e.getBBox()}catch{t=pn.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===pn||(t=pn.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+Sr(e,["x","cx","x1"])||0,y:+Sr(e,["y","cy","y1"])||0,width:0,height:0}:t},zo=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Uo(e))},Qe=function(e,t){if(t){var n=e.style,r;t in Pe&&t!==ae&&(t=H),n.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(r==="--"?t:t.replace(Jn,"-$1").toLowerCase())):n.removeAttribute(t)}},Be=function(e,t,n,r,i,s){var a=new se(e._pt,t,n,0,1,s?ko:Ro);return e._pt=a,a.b=r,a.e=i,e._props.push(n),a},Cr={deg:1,rad:1,turn:1},qs={grid:1,flex:1},ze=function o(e,t,n,r){var i=parseFloat(n)||0,s=(n+"").trim().substr((i+"").length)||"px",a=Ve.style,u=Ms.test(t),c=e.tagName.toLowerCase()==="svg",l=(c?"client":"offset")+(u?"Width":"Height"),d=100,h=r==="px",g=r==="%",v,_,p,f;if(r===s||!i||Cr[r]||Cr[s])return i;if(s!=="px"&&!h&&(i=o(e,t,n,"px")),f=e.getCTM&&zo(e),(g||s==="%")&&(Pe[t]||~t.indexOf("adius")))return v=f?e.getBBox()[u?"width":"height"]:e[l],V(g?i/v*d:i/100*v);if(a[u?"width":"height"]=d+(h?s:r),_=~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,f&&(_=(e.ownerSVGElement||{}).parentNode),(!_||_===ke||!_.appendChild)&&(_=ke.body),p=_._gsap,p&&g&&p.width&&u&&p.time===de.time&&!p.uncache)return V(i/p.width*d);if(g&&(t==="height"||t==="width")){var S=e.style[t];e.style[t]=d+r,v=e[l],S?e.style[t]=S:Qe(e,t)}else(g||s==="%")&&!qs[Ae(_,"display")]&&(a.position=Ae(e,"position")),_===e&&(a.position="static"),_.appendChild(Ve),v=Ve[l],_.removeChild(Ve),a.position="absolute";return u&&g&&(p=Ke(_),p.time=de.time,p.width=_[l]),V(h?v*i/d:v&&i?d/v*i:0)},Me=function(e,t,n,r){var i;return Zn||Rn(),t in Ee&&t!=="transform"&&(t=Ee[t],~t.indexOf(",")&&(t=t.split(",")[0])),Pe[t]&&t!=="transform"?(i=kt(e,r),i=t!=="transformOrigin"?i[t]:i.svg?i.origin:jt(Ae(e,ae))+" "+i.zOrigin+"px"):(i=e.style[t],(!i||i==="auto"||r||~(i+"").indexOf("calc("))&&(i=$t[t]&&$t[t](e,t,n)||Ae(e,t)||to(e,t)||(t==="opacity"?1:0))),n&&!~(i+"").trim().indexOf(" ")?ze(e,t,i,n)+n:i},Hs=function(e,t,n,r){if(!n||n==="none"){var i=pt(t,e,1),s=i&&Ae(e,i,1);s&&s!==n?(t=i,n=s):t==="borderColor"&&(n=Ae(e,"borderTopColor"))}var a=new se(this._pt,e.style,t,0,1,Do),u=0,c=0,l,d,h,g,v,_,p,f,S,b,E,C;if(a.b=n,a.e=r,n+="",r+="",r==="auto"&&(_=e.style[t],e.style[t]=r,r=Ae(e,t)||r,_?e.style[t]=_:Qe(e,t)),l=[n,r],To(l),n=l[0],r=l[1],h=n.match(rt)||[],C=r.match(rt)||[],C.length){for(;d=rt.exec(r);)p=d[0],S=r.substring(u,d.index),v?v=(v+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(v=1),p!==(_=h[c++]||"")&&(g=parseFloat(_)||0,E=_.substr((g+"").length),p.charAt(1)==="="&&(p=st(g,p)+E),f=parseFloat(p),b=p.substr((f+"").length),u=rt.lastIndex-b.length,b||(b=b||he.units[t]||E,u===r.length&&(r+=b,a.e+=b)),E!==b&&(g=ze(e,t,_,b)||0),a._pt={_next:a._pt,p:S||c===1?S:",",s:g,c:f-g,m:v&&v<4||t==="zIndex"?Math.round:0});a.c=u<r.length?r.substring(u,r.length):""}else a.r=t==="display"&&r==="none"?ko:Ro;return $r.test(r)&&(a.e=0),this._pt=a,a},Er={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Ys=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(e=n,n=r,r=e),t[0]=Er[n]||n,t[1]=Er[r]||r,t.join(" ")},Vs=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,r=n.style,i=t.u,s=n._gsap,a,u,c;if(i==="all"||i===!0)r.cssText="",u=1;else for(i=i.split(","),c=i.length;--c>-1;)a=i[c],Pe[a]&&(u=1,a=a==="transformOrigin"?ae:H),Qe(n,a);u&&(Qe(n,H),s&&(s.svg&&n.removeAttribute("transform"),kt(n,1),s.uncache=1,Bo(r)))}},$t={clearProps:function(e,t,n,r,i){if(i.data!=="isFromStart"){var s=e._pt=new se(e._pt,t,n,0,0,Vs);return s.u=r,s.pr=-10,s.tween=i,e._props.push(n),1}}},Rt=[1,0,0,1,0,0],Go={},Wo=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Ar=function(e){var t=Ae(e,H);return Wo(t)?Rt:t.substr(7).match(Xr).map(V)},er=function(e,t){var n=e._gsap||Ke(e),r=e.style,i=Ar(e),s,a,u,c;return n.svg&&e.getAttribute("transform")?(u=e.transform.baseVal.consolidate().matrix,i=[u.a,u.b,u.c,u.d,u.e,u.f],i.join(",")==="1,0,0,1,0,0"?Rt:i):(i===Rt&&!e.offsetParent&&e!==at&&!n.svg&&(u=r.display,r.display="block",s=e.parentNode,(!s||!e.offsetParent)&&(c=1,a=e.nextElementSibling,at.appendChild(e)),i=Ar(e),u?r.display=u:Qe(e,"display"),c&&(a?s.insertBefore(e,a):s?s.appendChild(e):at.removeChild(e))),t&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},kn=function(e,t,n,r,i,s){var a=e._gsap,u=i||er(e,!0),c=a.xOrigin||0,l=a.yOrigin||0,d=a.xOffset||0,h=a.yOffset||0,g=u[0],v=u[1],_=u[2],p=u[3],f=u[4],S=u[5],b=t.split(" "),E=parseFloat(b[0])||0,C=parseFloat(b[1])||0,m,T,y,x;n?u!==Rt&&(T=g*p-v*_)&&(y=E*(p/T)+C*(-_/T)+(_*S-p*f)/T,x=E*(-v/T)+C*(g/T)-(g*S-v*f)/T,E=y,C=x):(m=Uo(e),E=m.x+(~b[0].indexOf("%")?E/100*m.width:E),C=m.y+(~(b[1]||b[0]).indexOf("%")?C/100*m.height:C)),r||r!==!1&&a.smooth?(f=E-c,S=C-l,a.xOffset=d+(f*g+S*_)-f,a.yOffset=h+(f*v+S*p)-S):a.xOffset=a.yOffset=0,a.xOrigin=E,a.yOrigin=C,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!n,e.style[ae]="0px 0px",s&&(Be(s,a,"xOrigin",c,E),Be(s,a,"yOrigin",l,C),Be(s,a,"xOffset",d,a.xOffset),Be(s,a,"yOffset",h,a.yOffset)),e.setAttribute("data-svg-origin",E+" "+C)},kt=function(e,t){var n=e._gsap||new Eo(e);if("x"in n&&!t&&!n.uncache)return n;var r=e.style,i=n.scaleX<0,s="px",a="deg",u=getComputedStyle(e),c=Ae(e,ae)||"0",l,d,h,g,v,_,p,f,S,b,E,C,m,T,y,x,A,w,M,P,L,G,k,z,X,Te,Oe,Ie,xe,Q,J,ce;return l=d=h=_=p=f=S=b=E=0,g=v=1,n.svg=!!(e.getCTM&&zo(e)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(r[H]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[H]!=="none"?u[H]:"")),r.scale=r.rotate=r.translate="none"),T=er(e,n.svg),n.svg&&(n.uncache?(X=e.getBBox(),c=n.xOrigin-X.x+"px "+(n.yOrigin-X.y)+"px",z=""):z=!t&&e.getAttribute("data-svg-origin"),kn(e,z||c,!!z||n.originIsAbsolute,n.smooth!==!1,T)),C=n.xOrigin||0,m=n.yOrigin||0,T!==Rt&&(w=T[0],M=T[1],P=T[2],L=T[3],l=G=T[4],d=k=T[5],T.length===6?(g=Math.sqrt(w*w+M*M),v=Math.sqrt(L*L+P*P),_=w||M?nt(M,w)*Ye:0,S=P||L?nt(P,L)*Ye+_:0,S&&(v*=Math.abs(Math.cos(S*ut))),n.svg&&(l-=C-(C*w+m*P),d-=m-(C*M+m*L))):(ce=T[6],Q=T[7],Oe=T[8],Ie=T[9],xe=T[10],J=T[11],l=T[12],d=T[13],h=T[14],y=nt(ce,xe),p=y*Ye,y&&(x=Math.cos(-y),A=Math.sin(-y),z=G*x+Oe*A,X=k*x+Ie*A,Te=ce*x+xe*A,Oe=G*-A+Oe*x,Ie=k*-A+Ie*x,xe=ce*-A+xe*x,J=Q*-A+J*x,G=z,k=X,ce=Te),y=nt(-P,xe),f=y*Ye,y&&(x=Math.cos(-y),A=Math.sin(-y),z=w*x-Oe*A,X=M*x-Ie*A,Te=P*x-xe*A,J=L*A+J*x,w=z,M=X,P=Te),y=nt(M,w),_=y*Ye,y&&(x=Math.cos(y),A=Math.sin(y),z=w*x+M*A,X=G*x+k*A,M=M*x-w*A,k=k*x-G*A,w=z,G=X),p&&Math.abs(p)+Math.abs(_)>359.9&&(p=_=0,f=180-f),g=V(Math.sqrt(w*w+M*M+P*P)),v=V(Math.sqrt(k*k+ce*ce)),y=nt(G,k),S=Math.abs(y)>2e-4?y*Ye:0,E=J?1/(J<0?-J:J):0),n.svg&&(z=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!Wo(Ae(e,H)),z&&e.setAttribute("transform",z))),Math.abs(S)>90&&Math.abs(S)<270&&(i?(g*=-1,S+=_<=0?180:-180,_+=_<=0?180:-180):(v*=-1,S+=S<=0?180:-180)),t=t||n.uncache,n.x=l-((n.xPercent=l&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-l)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+s,n.y=d-((n.yPercent=d&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+s,n.z=h+s,n.scaleX=V(g),n.scaleY=V(v),n.rotation=V(_)+a,n.rotationX=V(p)+a,n.rotationY=V(f)+a,n.skewX=S+a,n.skewY=b+a,n.transformPerspective=E+s,(n.zOrigin=parseFloat(c.split(" ")[2])||!t&&n.zOrigin||0)&&(r[ae]=jt(c)),n.xOffset=n.yOffset=0,n.force3D=he.force3D,n.renderTransform=n.svg?Xs:Lo?qo:Ks,n.uncache=0,n},jt=function(e){return(e=e.split(" "))[0]+" "+e[1]},gn=function(e,t,n){var r=ee(t);return V(parseFloat(t)+parseFloat(ze(e,"x",n+"px",r)))+r},Ks=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,qo(e,t)},qe="0deg",bt="0px",He=") ",qo=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,s=n.x,a=n.y,u=n.z,c=n.rotation,l=n.rotationY,d=n.rotationX,h=n.skewX,g=n.skewY,v=n.scaleX,_=n.scaleY,p=n.transformPerspective,f=n.force3D,S=n.target,b=n.zOrigin,E="",C=f==="auto"&&e&&e!==1||f===!0;if(b&&(d!==qe||l!==qe)){var m=parseFloat(l)*ut,T=Math.sin(m),y=Math.cos(m),x;m=parseFloat(d)*ut,x=Math.cos(m),s=gn(S,s,T*x*-b),a=gn(S,a,-Math.sin(m)*-b),u=gn(S,u,y*x*-b+b)}p!==bt&&(E+="perspective("+p+He),(r||i)&&(E+="translate("+r+"%, "+i+"%) "),(C||s!==bt||a!==bt||u!==bt)&&(E+=u!==bt||C?"translate3d("+s+", "+a+", "+u+") ":"translate("+s+", "+a+He),c!==qe&&(E+="rotate("+c+He),l!==qe&&(E+="rotateY("+l+He),d!==qe&&(E+="rotateX("+d+He),(h!==qe||g!==qe)&&(E+="skew("+h+", "+g+He),(v!==1||_!==1)&&(E+="scale("+v+", "+_+He),S.style[H]=E||"translate(0, 0)"},Xs=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,s=n.x,a=n.y,u=n.rotation,c=n.skewX,l=n.skewY,d=n.scaleX,h=n.scaleY,g=n.target,v=n.xOrigin,_=n.yOrigin,p=n.xOffset,f=n.yOffset,S=n.forceCSS,b=parseFloat(s),E=parseFloat(a),C,m,T,y,x;u=parseFloat(u),c=parseFloat(c),l=parseFloat(l),l&&(l=parseFloat(l),c+=l,u+=l),u||c?(u*=ut,c*=ut,C=Math.cos(u)*d,m=Math.sin(u)*d,T=Math.sin(u-c)*-h,y=Math.cos(u-c)*h,c&&(l*=ut,x=Math.tan(c-l),x=Math.sqrt(1+x*x),T*=x,y*=x,l&&(x=Math.tan(l),x=Math.sqrt(1+x*x),C*=x,m*=x)),C=V(C),m=V(m),T=V(T),y=V(y)):(C=d,y=h,m=T=0),(b&&!~(s+"").indexOf("px")||E&&!~(a+"").indexOf("px"))&&(b=ze(g,"x",s,"px"),E=ze(g,"y",a,"px")),(v||_||p||f)&&(b=V(b+v-(v*C+_*T)+p),E=V(E+_-(v*m+_*y)+f)),(r||i)&&(x=g.getBBox(),b=V(b+r/100*x.width),E=V(E+i/100*x.height)),x="matrix("+C+","+m+","+T+","+y+","+b+","+E+")",g.setAttribute("transform",x),S&&(g.style[H]=x)},$s=function(e,t,n,r,i){var s=360,a=Z(i),u=parseFloat(i)*(a&&~i.indexOf("rad")?Ye:1),c=u-r,l=r+c+"deg",d,h;return a&&(d=i.split("_")[1],d==="short"&&(c%=s,c!==c%(s/2)&&(c+=c<0?s:-s)),d==="cw"&&c<0?c=(c+s*Tr)%s-~~(c/s)*s:d==="ccw"&&c>0&&(c=(c-s*Tr)%s-~~(c/s)*s)),e._pt=h=new se(e._pt,t,n,r,c,Ps),h.e=l,h.u="deg",e._props.push(n),h},wr=function(e,t){for(var n in t)e[n]=t[n];return e},js=function(e,t,n){var r=wr({},n._gsap),i="perspective,force3D,transformOrigin,svgOrigin",s=n.style,a,u,c,l,d,h,g,v;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),s[H]=t,a=kt(n,1),Qe(n,H),n.setAttribute("transform",c)):(c=getComputedStyle(n)[H],s[H]=t,a=kt(n,1),s[H]=c);for(u in Pe)c=r[u],l=a[u],c!==l&&i.indexOf(u)<0&&(g=ee(c),v=ee(l),d=g!==v?ze(n,u,c,v):parseFloat(c),h=parseFloat(l),e._pt=new se(e._pt,a,u,d,h-d,Pn),e._pt.u=v||0,e._props.push(u));wr(a,r)};ie("padding,margin,Width,Radius",function(o,e){var t="Top",n="Right",r="Bottom",i="Left",s=(e<3?[t,n,r,i]:[t+i,t+n,r+n,r+i]).map(function(a){return e<2?o+a:"border"+a+o});$t[e>1?"border"+o:o]=function(a,u,c,l,d){var h,g;if(arguments.length<4)return h=s.map(function(v){return Me(a,v,c)}),g=h.join(" "),g.split(h[0]).length===5?h[0]:g;h=(l+"").split(" "),g={},s.forEach(function(v,_){return g[v]=h[_]=h[_]||h[(_-1)/2|0]}),a.init(u,g,d)}});var Ho={name:"css",register:Rn,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var s=this._props,a=e.style,u=n.vars.startAt,c,l,d,h,g,v,_,p,f,S,b,E,C,m,T,y;Zn||Rn(),this.styles=this.styles||Fo(e),y=this.styles.props,this.tween=n;for(_ in t)if(_!=="autoRound"&&(l=t[_],!(le[_]&&Ao(_,t,n,r,e,i)))){if(g=typeof l,v=$t[_],g==="function"&&(l=l.call(n,r,e,i),g=typeof l),g==="string"&&~l.indexOf("random(")&&(l=Dt(l)),v)v(this,e,_,l,n)&&(T=1);else if(_.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(_)+"").trim(),l+="",Le.lastIndex=0,Le.test(c)||(p=ee(c),f=ee(l)),f?p!==f&&(c=ze(e,_,c,f)+f):p&&(l+=p),this.add(a,"setProperty",c,l,r,i,0,0,_),s.push(_),y.push(_,0,a[_]);else if(g!=="undefined"){if(u&&_ in u?(c=typeof u[_]=="function"?u[_].call(n,r,e,i):u[_],Z(c)&&~c.indexOf("random(")&&(c=Dt(c)),ee(c+"")||c==="auto"||(c+=he.units[_]||ee(Me(e,_))||""),(c+"").charAt(1)==="="&&(c=Me(e,_))):c=Me(e,_),h=parseFloat(c),S=g==="string"&&l.charAt(1)==="="&&l.substr(0,2),S&&(l=l.substr(2)),d=parseFloat(l),_ in Ee&&(_==="autoAlpha"&&(h===1&&Me(e,"visibility")==="hidden"&&d&&(h=0),y.push("visibility",0,a.visibility),Be(this,a,"visibility",h?"inherit":"hidden",d?"inherit":"hidden",!d)),_!=="scale"&&_!=="transform"&&(_=Ee[_],~_.indexOf(",")&&(_=_.split(",")[0]))),b=_ in Pe,b){if(this.styles.save(_),E||(C=e._gsap,C.renderTransform&&!t.parseTransform||kt(e,t.parseTransform),m=t.smoothOrigin!==!1&&C.smooth,E=this._pt=new se(this._pt,a,H,0,1,C.renderTransform,C,0,-1),E.dep=1),_==="scale")this._pt=new se(this._pt,C,"scaleY",C.scaleY,(S?st(C.scaleY,S+d):d)-C.scaleY||0,Pn),this._pt.u=0,s.push("scaleY",_),_+="X";else if(_==="transformOrigin"){y.push(ae,0,a[ae]),l=Ys(l),C.svg?kn(e,l,0,m,0,this):(f=parseFloat(l.split(" ")[2])||0,f!==C.zOrigin&&Be(this,C,"zOrigin",C.zOrigin,f),Be(this,a,_,jt(c),jt(l)));continue}else if(_==="svgOrigin"){kn(e,l,1,m,0,this);continue}else if(_ in Go){$s(this,C,_,h,S?st(h,S+l):l);continue}else if(_==="smoothOrigin"){Be(this,C,"smooth",C.smooth,l);continue}else if(_==="force3D"){C[_]=l;continue}else if(_==="transform"){js(this,l,e);continue}}else _ in a||(_=pt(_)||_);if(b||(d||d===0)&&(h||h===0)&&!Ds.test(l)&&_ in a)p=(c+"").substr((h+"").length),d||(d=0),f=ee(l)||(_ in he.units?he.units[_]:p),p!==f&&(h=ze(e,_,c,f)),this._pt=new se(this._pt,b?C:a,_,h,(S?st(h,S+d):d)-h,!b&&(f==="px"||_==="zIndex")&&t.autoRound!==!1?Rs:Pn),this._pt.u=f||0,p!==f&&f!=="%"&&(this._pt.b=c,this._pt.r=Is);else if(_ in a)Hs.call(this,e,_,c,S?S+l:l);else if(_ in e)this.add(e,_,c||e[_],S?S+l:l,r,i);else if(_!=="parseTransform"){Wn(_,l);continue}b||(_ in a?y.push(_,0,a[_]):y.push(_,1,c||e[_])),s.push(_)}}T&&Po(this)},render:function(e,t){if(t.tween._time||!Qn())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Me,aliases:Ee,getSetter:function(e,t,n){var r=Ee[t];return r&&r.indexOf(",")<0&&(t=r),t in Pe&&t!==ae&&(e._gsap.x||Me(e,"x"))?n&&br===n?t==="scale"?Ls:Fs:(br=n||{})&&(t==="scale"?Us:zs):e.style&&!Un(e.style[t])?ks:~t.indexOf("-")?Bs:$n(e,t)},core:{_removeProperty:Qe,_getMatrix:er}};ue.utils.checkPrefix=pt;ue.core.getStyleSaver=Fo;(function(o,e,t,n){var r=ie(o+","+e+","+t,function(i){Pe[i]=1});ie(e,function(i){he.units[i]="deg",Go[i]=1}),Ee[r[13]]=o+","+e,ie(n,function(i){var s=i.split(":");Ee[s[1]]=r[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ie("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(o){he.units[o]="px"});ue.registerPlugin(Ho);var mt=ue.registerPlugin(Ho)||ue;mt.core.Tween;const Je=500,Zs=()=>{const o=new Map,e=new Map,t=async(i,s)=>{s.set(i,0);for(let a=0;a<=Je;a++)setTimeout(()=>{s.set(i,a)},1*a);await new Promise(a=>setTimeout(a,Je)),s.delete(i)};return{animateIn:i=>t(i,e),animateOut:i=>t(i,o),itemsAnimatingIn:e,itemsAnimatingOut:o,isAnimating:i=>e.has(i)||o.has(i)}},{mapRange:Qs}=mt.utils,ye=(o,e)=>Qs(Je*o,Je*e,0,1),gt=(o,e,t)=>t>=o&&t<=e,Js=(o,e)=>{const t=o/1e3;return Math.floor(e*t)},Ft={linear:o=>o,in:o=>o*o,out:o=>o*(2-o),"in-out":o=>o<.5?2*o*o:-1+(4-2*o)*o},ea={easeFn:"in-out"},ta=o=>{const{start:e,end:t,numberOfSteps:n,easeFn:r}={...ea,...o};if(n<1)throw new Error(`numberOfSteps must be greater than 0, got ${n}`);if(!Number.isInteger(n))throw new Error(`numberOfSteps must be an integer, got ${n}`);const i=[],s=typeof r=="string"?Ft[r]:r;for(let a=1;a<=n;a++){const u=a/n,c=s(u),l=Math.round(e.x+(t.x-e.x)*c),d=Math.round(e.y+(t.y-e.y)*c);i.push({x:l,y:d})}return i},na={durationMs:1e3,frameRate:60},ra=o=>{const{durationMs:e,frameRate:t}={...na,...o},n=ta({...o,numberOfSteps:Js(e,t)});return{coords:n,timePerFrameMs:Math.floor(e/n.length)}},{interpolate:tn}=mt.utils,nn=Ft["in-out"],oa=o=>e=>{const t=ye(0,1),n=nn(t(o));return{radius:tn(0,e.radius)(n)}},ia=o=>e=>{const t=ye(0,1),n=nn(t(o));return{radius:tn(e.radius,0)(n)}},sa=o=>e=>{if(e.textArea===void 0)return e;const t=ye(0,1),n=nn(t(o)),r=tn(0,e.textArea.text.fontSize);return{...e,textArea:{...e.textArea,text:{...e.textArea.text,fontSize:r(n)}}}},aa=o=>e=>{if(e.textArea===void 0)return e;const t=ye(0,1),n=nn(t(o)),r=tn(e.textArea.text.fontSize,0);return{...e,textArea:{...e.textArea,text:{...e.textArea.text,fontSize:r(n)}}}},ua=o=>e=>Zt({...e,...sa(o)(e),...oa(o)(e)}),ca=o=>e=>Zt({...e,...aa(o)(e),...ia(o)(e)}),la=({controller:o,id:e})=>t=>{const{itemsAnimatingIn:n,itemsAnimatingOut:r}=o,i=n.get(e);if(i!==void 0)return ua(i)(t);const s=r.get(e);return s!==void 0?ca(s)(t):Zt(t)},da=(o,e,t)=>{const n=la({controller:t,id:o.id}),r=e("nodeColor",o),i=e("nodeBorderColor",o),s=e("nodeSize",o),a=e("nodeBorderWidth",o),u=e("nodeText",o),c=e("nodeTextSize",o),l=e("nodeTextColor",o),d=e("nodeShape",o),h=n({at:{x:o.x,y:o.y},radius:s,color:r,stroke:{color:i,width:a},textArea:{text:{content:u,fontSize:c,fontWeight:"bold",color:l},color:O.TRANSPARENT}}),g=Ri({at:{x:o.x-s,y:o.y-s},size:s*2,color:r,stroke:{color:i,width:a},textArea:{text:{content:u,fontSize:c,fontWeight:"bold",color:l},color:O.TRANSPARENT}});return{shape:d==="circle"?h:g,id:o.id,graphType:"node"}},be={IN:{BODY:[0,.75],TEXT_AREA:[.75,1]}},fa=o=>e=>{const t=e.color,n=e.text.color;if(!t||!n)return e;const r=a=>Ur(a).setAlpha(o).toRgbString(),i=r(t),s=r(n);return{...e,color:i,text:{...e.text,color:s}}},tr=o=>e=>{if(!e)return;const n=ye(...be.IN.TEXT_AREA)(o);return fa(n)(e)},nr=o=>e=>{if(!e)return;const n=1-ye(0,1)(o),r=e.text.color;if(!r)return e;const s=(a=>Ur(a).setAlpha(n).toRgbString())(r);return{...e,text:{...e.text,color:s}}},{interpolate:Bn,normalize:ha}=mt.utils,Yo=Ft["in-out"],_a=o=>e=>{const t=ye(...be.IN.BODY),n=Yo(t(o)),r=Bn(e.start,e.end),i=Bn(0,e.width);return{end:r(n),width:i(n)}},pa=o=>e=>{const t=ye(0,1),n=Yo(t(o));return{width:Bn(e.width,0)(n)}},ga=o=>e=>{const t=ha(0,Je,o);return gt(be.IN.BODY[0],be.IN.BODY[1],t)?Ct({...e,..._a(o)(e),textArea:void 0}):gt(be.IN.TEXT_AREA[0],be.IN.TEXT_AREA[1],t)?Ct({...e,textArea:tr(o)(e.textArea)}):Ct(e)},ma=o=>e=>Ct({...e,...pa(o)(e),textArea:nr(o)(e.textArea)}),va=({controller:o,id:e})=>t=>{const{itemsAnimatingIn:n,itemsAnimatingOut:r}=o,i=n.get(e);if(i!==void 0)return ga(i)(t);const s=r.get(e);return s!==void 0?ma(s)(t):Ct(t)},{interpolate:Vo,normalize:ya}=mt.utils,Ko=Ft["in-out"],ba=o=>e=>{const t=ye(...be.IN.BODY),n=Ko(t(o));return{width:Vo(0,e.width)(n)}},Ta=o=>e=>{const t=ye(0,1),n=Ko(t(o));return{width:Vo(e.width,0)(n)}},xa=o=>e=>{const t=ya(0,Je,o);return gt(be.IN.BODY[0],be.IN.BODY[1],t)?it({...e,...ba(o)(e),textArea:void 0}):gt(be.IN.TEXT_AREA[0],be.IN.TEXT_AREA[1],t)?it({...e,textArea:tr(o)(e.textArea)}):it(e)},Sa=o=>e=>it({...e,...Ta(o)(e),textArea:nr(o)(e.textArea)}),Ca=({controller:o,id:e})=>t=>{const{itemsAnimatingIn:n,itemsAnimatingOut:r}=o,i=n.get(e);if(i!==void 0)return xa(i)(t);const s=r.get(e);return s!==void 0?Sa(s)(t):it(t)},St={IN:{LINE:[0,.25],TURN:[.25,.5],ARROW:[.5,.75],BODY:[0,.75],TEXT_AREA:[.75,1]}},{interpolate:Xo,normalize:Ea}=mt.utils,$o=Ft["in-out"],Aa=o=>e=>{const t=ye(...St.IN.BODY),n=$o(t(o));return{lineWidth:Xo(1e-5,e.lineWidth)(n)}},wa=o=>e=>{const t=ye(0,1),n=$o(t(o));return{lineWidth:Xo(e.lineWidth,1e-5)(n)}},Oa=o=>e=>{const t=Ea(0,Je,o);return gt(St.IN.BODY[0],St.IN.BODY[1],t)?Et({...e,...Aa(o)(e),textArea:void 0}):gt(St.IN.TEXT_AREA[0],St.IN.TEXT_AREA[1],t)?Et({...e,textArea:tr(o)(e.textArea)}):Et(e)},Na=o=>e=>Et({...e,...wa(o)(e),textArea:nr(o)(e.textArea)}),Ma=({controller:o,id:e})=>t=>{const{itemsAnimatingIn:n,itemsAnimatingOut:r}=o,i=n.get(e);if(i!==void 0)return Oa(i)(t);const s=r.get(e);return s!==void 0?Na(s)(t):Et(t)},Or=2,Da=(o,e)=>{const{displayEdgeLabels:t,isGraphDirected:n}=e.settings.value,r={id:o.id,controller:e.animationController},i=va(r),s=Ca(r),a=Ma(r),[u,c]=yn(o.id,e),d=zr(u.id,c.id,e).length>1,h=c===u,g=e.getTheme("nodeBorderWidth",u),v=e.getTheme("nodeBorderWidth",c),_=e.getTheme("nodeSize",u),p=e.getTheme("nodeSize",c),f=Math.atan2(c.y-u.y,c.x-u.x),S=v/2+Or,b={x:(p+S)*Math.cos(f),y:(p+S)*Math.sin(f)},E={x:u.x,y:u.y},C={x:c.x-(n?b.x:0),y:c.y-(n?b.y:0)},m=e.getTheme("edgeWidth",o),T=Math.max(m*1.2,7);d&&(E.x+=Math.cos(f+Math.PI/2)*T,E.y+=Math.sin(f+Math.PI/2)*T,C.x+=Math.cos(f+Math.PI/2)*T,C.y+=Math.sin(f+Math.PI/2)*T);const y=ai(E,e.edges.value.filter(Q=>(Q.from===u.id||Q.to===c.id)&&Q.from!==Q.to).map(Q=>{const[J,ce]=yn(Q.id,e);return u.id===J.id?ce:J}).filter((Q,J,ce)=>J===ce.findIndex(Lt=>Lt.x===Q.x&&Lt.y===Q.y))),x=e.getTheme("edgeColor",o),A=e.getTheme("edgeTextColor",o),w=e.getTheme("graphBgColor"),M=e.getTheme("edgeText",o),P=e.getTheme("edgeTextSize",o),L=e.getTheme("edgeTextFontWeight",o),k=t?{color:w,activeColor:w,text:{content:M,color:A,fontSize:P,fontWeight:L}}:void 0,z=(_+g)*ui,X=z-(_+g/2)-Or;if(h)return{shape:a({spacing:m*1.2,at:{x:u.x,y:u.y},upDistance:z,downDistance:X,rotation:y,lineWidth:m,color:x,textArea:k}),id:o.id,graphType:"edge"};const Te=_+g/2+p+v/2,Oe=(u.x-c.x)**2+(u.y-c.y)**2;return Te**2>Oe?void 0:n?{shape:i({start:E,end:C,width:m,textOffsetFromCenter:(_+g/2)/2,color:x,textArea:k}),id:o.id,graphType:"edge"}:{shape:s({start:E,end:C,width:m,color:x,textArea:k}),id:o.id,graphType:"edge"}},rr={nodeShape:"circle",nodeSize:35,nodeBorderWidth:8,nodeTextSize:24,nodeAnchorRadius:Math.ceil(Math.sqrt(35)*2),edgeWidth:10,edgeTextSize:20,nodeText:({label:o})=>o,edgeText:({label:o})=>o,edgeTextFontWeight:"bold",linkPreviewWidth:10},Pa="rgb(100, 60, 70)",Ia={nodeBorderColor:O.BLACK,nodeColor:O.STONE_600,nodeTextColor:O.WHITE,nodeFocusBorderColor:O.RED_700,nodeFocusColor:Pa,nodeFocusTextColor:O.WHITE,edgeColor:O.STONE_900,edgeFocusColor:O.RED_700,edgeFocusTextColor:O.WHITE,edgeTextColor:O.WHITE,graphBgColor:O.GRAY_600,graphBgPatternColor:O.WHITE+"15",nodeAnchorColorWhenParentFocused:O.RED_800,nodeAnchorColor:O.GRAY_900,linkPreviewColor:O.BLACK,marqueeSelectionBoxColor:O.WHITE+"15",marqueeSelectionBoxBorderColor:O.WHITE,marqueeEncapsulatedNodeBoxBorderColor:O.RED_700,marqueeEncapsulatedNodeBoxColor:O.RED_700+"20",...rr},Ra={nodeColor:O.GRAY_50,nodeBorderColor:O.GRAY_800,nodeFocusBorderColor:O.BLUE_600,nodeFocusColor:O.BLUE_100,nodeTextColor:O.GRAY_900,nodeFocusTextColor:O.GRAY_900,edgeColor:O.GRAY_800,edgeTextColor:O.GRAY_900,edgeFocusColor:O.BLUE_600,edgeFocusTextColor:O.BLACK,graphBgColor:O.GRAY_200,graphBgPatternColor:O.BLACK+"15",nodeAnchorColor:O.BLACK,nodeAnchorColorWhenParentFocused:O.BLUE_900,linkPreviewColor:O.BLACK,marqueeSelectionBoxColor:O.BLUE_300+"15",marqueeSelectionBoxBorderColor:O.BLUE_500,marqueeEncapsulatedNodeBoxBorderColor:O.BLUE_700,marqueeEncapsulatedNodeBoxColor:O.BLUE_700+"05",...rr},ka={nodeColor:O.PINK_100,nodeBorderColor:O.PINK_400,nodeFocusBorderColor:O.PURPLE_600,nodeFocusColor:O.PURPLE_200,nodeTextColor:O.PINK_600,nodeFocusTextColor:O.PURPLE_900,edgeColor:O.PINK_600,edgeTextColor:O.PINK_600,edgeFocusColor:O.PURPLE_600,edgeFocusTextColor:O.PURPLE_600,graphBgColor:O.PINK_300,graphBgPatternColor:O.WHITE+"50",nodeAnchorColor:O.PINK_500,nodeAnchorColorWhenParentFocused:O.PURPLE_700,linkPreviewColor:O.PINK_900,marqueeSelectionBoxColor:O.PINK_300+"15",marqueeSelectionBoxBorderColor:O.PINK_500,marqueeEncapsulatedNodeBoxBorderColor:O.PINK_700,marqueeEncapsulatedNodeBoxColor:O.PINK_700+"05",...rr},jo={light:Ra,dark:Ia,girl:ka},bc=(o,e)=>({nodeSize:o("nodeSize",e),nodeBorderWidth:o("nodeBorderWidth",e),nodeColor:o("nodeColor",e),nodeBorderColor:o("nodeBorderColor",e),nodeTextSize:o("nodeTextSize",e),nodeTextColor:o("nodeTextColor",e),nodeText:o("nodeText",e),nodeShape:o("nodeShape",e)}),Ba=()=>({nodeSize:[],nodeBorderWidth:[],nodeColor:[],nodeBorderColor:[],nodeFocusColor:[],nodeFocusBorderColor:[],nodeText:[],nodeFocusTextColor:[],nodeTextSize:[],nodeTextColor:[],nodeShape:[],edgeColor:[],edgeWidth:[],edgeText:[],edgeTextSize:[],edgeTextColor:[],edgeFocusTextColor:[],edgeTextFontWeight:[],edgeFocusColor:[],graphBgColor:[],graphBgPatternColor:[],nodeAnchorRadius:[],nodeAnchorColor:[],nodeAnchorColorWhenParentFocused:[],linkPreviewColor:[],linkPreviewWidth:[],marqueeSelectionBoxColor:[],marqueeSelectionBoxBorderColor:[],marqueeEncapsulatedNodeBoxColor:[],marqueeEncapsulatedNodeBoxBorderColor:[]}),Fa=o=>Object.prototype.toString.call(o)==="[object Object]",Zo=(o,e)=>{const t={};if(!o)return e;if(!e)return null;const n=Object.keys(o),r=Object.keys(e);for(const i of r)n.includes(i)||(t[i]=e[i]);for(const i of n){if(Fa(o[i])){const s=Zo(o[i],e[i]);s&&(t[i]=s);continue}if(Array.isArray(o[i])){JSON.stringify(o[i])!==JSON.stringify(e[i])&&(t[i]=e[i]);continue}else o[i]!==e[i]&&(t[i]=e[i])}return Object.keys(t).length?t:null},Fn=o=>{const e={...o};for(const t in e)typeof e[t]=="object"&&(e[t]=Fn(e[t]));return e},La=o=>({subscribe:(e,t)=>o[e].add(t),unsubscribe:(e,t)=>o[e].delete(t),emit:(e,...t)=>{for(const n of o[e])n(...t)}}),Ua=()=>({onStructureChange:new Set,onNodeAdded:new Set,onBulkNodeAdded:new Set,onNodeRemoved:new Set,onBulkNodeRemoved:new Set,onNodeMoved:new Set,onBulkNodeMoved:new Set,onEdgeAdded:new Set,onBulkEdgeAdded:new Set,onEdgeRemoved:new Set,onBulkEdgeRemoved:new Set,onEdgeLabelEdited:new Set,onRepaint:new Set,onNodeHoverChange:new Set,onGraphLoaded:new Set,onGraphReset:new Set,onClick:new Set,onMouseDown:new Set,onMouseUp:new Set,onMouseMove:new Set,onDblClick:new Set,onContextMenu:new Set,onKeyDown:new Set,onKeyUp:new Set,onThemeChange:new Set,onSettingsChange:new Set,onUndo:new Set,onRedo:new Set,onFocusChange:new Set,onNodeDragStart:new Set,onNodeDrop:new Set,onNodeAnchorDragStart:new Set,onNodeAnchorDrop:new Set,onGroupDragStart:new Set,onGroupDrop:new Set,onMarqueeBeginSelection:new Set,onMarqueeEndSelection:new Set}),Nr=o=>o==null,za=o=>{const e=o.trim().split("/").filter(Boolean);if(e.length!==2)return!1;const[t,n]=e.map(Number);return!(Nr(t)||Nr(n))},Ga=o=>{if(!za(o))return;const e=o.split("/"),[t,n]=e.map(Number);return t/n},Wa={displayEdgeLabels:!0,edgeLabelsEditable:!0,edgeInputToLabel:o=>{var n;const e=o.trim();if(!e)return;const t=(n=Ga(e))==null?void 0:n.toFixed(2);return t==="Infinity"?"":t==="-Infinity"?"-":t===void 0&&isNaN(Number(e))?void 0:t??e},newNodeLabelGetter:null,isGraphDirected:!0},qa={focusable:!0,focusBlacklist:[]},Ha={draggable:!0},Ya={nodeAnchors:!0},Va={marquee:!0,marqueeSelectableGraphTypes:["node","edge"]},Ka={interactive:!0,userAddedEdgeLabel:"1",userAddedEdgeRuleNoSelfLoops:!1,userAddedEdgeRuleOneEdgePerPath:!1},Xa={persistent:!0,persistentStorageKey:"graph",persistentBlacklist:new Set},$a={shortcuts:!0,shortcutUndo:!0,shortcutRedo:!0,shortcutSelectAll:!0,shortcutDelete:!0,shortcutEscape:!0,shortcutZoomIn:!0,shortcutZoomOut:!0},ja={...Wa,...qa,...Ha,...Ya,...Va,...Ka,...Xa,...$a},Mr=(o,...e)=>typeof o=="function"?o(...e):o,Za=(o,e)=>(t,...n)=>{const r=e[t].findLast(s=>{const a=s.value;return Mr(a,...n)!==void 0}),i=(r==null?void 0:r.value)??jo[o.value][t];if(!i)throw new Error(`Theme property "${t}" not found`);return Mr(i,...n)},Qa=(o,e)=>{const t=I(()=>{const r=new Map;for(const i of o.value)r.set(i.id,i);return r}),n=I(()=>{const r=new Map;for(const i of e.value)r.set(i.id,i);return r});return{nodeIdToNodeMap:t,edgeIdToEdgeMap:n}},Ja=({canvas:o,emit:e})=>{const t=D([]),n=[],r=()=>{var h,g,v,_;if(!o.value)return;const a=o.value.getContext("2d");if(!a)return;a.clearRect(0,0,o.value.width,o.value.height);const u=n.reduce((p,f)=>f(p),[]);t.value=[...u.sort((p,f)=>p.priority-f.priority)];const c=t.value.findLastIndex(p=>p.graphType==="edge"),l=t.value.slice(0,c+1),d=t.value.slice(c+1);for(const p of l)p.shape.drawShape(a);for(const p of l)(g=(h=p.shape).drawTextAreaMatte)==null||g.call(h,a);for(const p of l)(_=(v=p.shape).drawText)==null||_.call(v,a);for(const p of d)p.shape.draw(a);e("onRepaint",a,"loop")},i=setInterval(r,1e3/60);return ci(()=>{clearInterval(i)}),setTimeout(r,1e3),{aggregator:t,updateAggregator:n,getSchemaItemsByCoordinates:a=>t.value.sort((u,c)=>u.priority-c.priority).filter(u=>{var c,l;return u.shape.shapeHitbox(a)||((l=(c=u.shape).textHitbox)==null?void 0:l.call(c,a))})}},eu={broadcast:!0,focus:!0,history:!0,animate:!1},tu={broadcast:!0,focus:!1,history:!0,animate:!1},Dr={broadcast:!0,history:!0,animate:!1},Pr={broadcast:!0,focus:!1,history:!0,animate:!1},nu={broadcast:!1,focus:!1,history:!1,animate:!0},ru={history:!0},Ir={broadcast:!0,history:!0,animate:!1},ou={broadcast:!0},iu={label:""},su="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");Array.from({length:999},(o,e)=>(e+1).toString());const au=(o,e)=>()=>{let t=o.value.map(({label:a})=>a),n=0,r=0,i;const s=()=>n===0?"":e[(n-1)%e.length];for(;!i;){r>=e.length&&(t=t.slice(e.length),r=0,n++);const u=s()+e[r];t.includes(u)||(i=u),r++}return i},uu=o=>au(o.nodes,su),cu=({nodes:o,edges:e,nodeMap:t,edgeMap:n,emit:r,settings:i,animationController:s})=>{const a=b=>t.value.get(b),u=b=>n.value.get(b),c=(b,E={})=>{if(b!=null&&b.id&&a(b.id)){console.warn("prevented adding a node with an existing id, this shouldn't happen");return}const C={...eu,...E},m=i.value.newNodeLabelGetter??uu({nodes:o}),T={id:b.id??qt(),label:b.label??m(),x:b.x??0,y:b.y??0};return C.animate&&s.animateIn(T.id),o.value.push(T),r("onNodeAdded",T,C),r("onStructureChange"),T},l=(b,E={})=>{if(b.length===0)return;const C={...tu,...E},m=[];for(const T of b){const y=c(T,{focus:!1,broadcast:!1,history:!1});y&&m.push(y)}m.length!==0&&r("onBulkNodeAdded",m,C)},d=(b,E={})=>{const C={...Pr,...E},{isGraphDirected:m}=i.value,[T,y]=[a(b.from),a(b.to)];if(!T||!y)return;if(m){if(e.value.find(w=>w.from===b.from&&w.to===b.to))return}else if(e.value.find(w=>w.from===b.from&&w.to===b.to||w.from===b.to&&w.to===b.from))return;const x={...iu,id:qt(),...b};return C.animate&&s.animateIn(x.id),e.value.push(x),r("onEdgeAdded",x,C),r("onStructureChange"),x},h=(b,E={})=>{if(b.length===0)return;const C={...nu,...E},m=[];for(const T of b){const y=d(T,{broadcast:!1,history:!1});y&&m.push(y)}m.length!==0&&r("onBulkEdgeAdded",m,C)},g=(b,E,C={})=>{const m=a(b);if(!m)return;const T={...ou,...C};m.x=E.x,m.y=E.y,r("onNodeMoved",m,T)},v=(b,E,C={})=>{const m={...Pr,...C},T=u(b);if(!T)return;const y=T.label;T.label=E,r("onEdgeLabelEdited",T,y,m),r("onStructureChange")},_=async(b,E={})=>{const C=a(b);if(!C)return;const m={...Dr,...E},T=Gr(C.id,{edges:e,getEdge:u,settings:i}),y=[];for(const x of T){const A=await f(x.id,{broadcast:!1,history:!1,animate:m.animate});A&&y.push(A)}return m.animate&&await s.animateOut(C.id),o.value=o.value.filter(x=>x.id!==C.id),r("onNodeRemoved",C,y,m),r("onStructureChange"),[C,y]},p=async(b,E={})=>{if(b.length===0)return;const C={...Dr,...E},m=[],T=[];for(const y of b){const x=await _(y,{broadcast:!1,history:!1,animate:C.animate});if(!x)continue;const[A,w]=x;m.push(A),T.push(...w)}m.length!==0&&r("onBulkNodeRemoved",m,T,C)},f=async(b,E={})=>{const C=u(b);if(!C)return;const m={...Ir,...E};return m.animate&&await s.animateOut(C.id),e.value=e.value.filter(T=>T.id!==C.id),r("onEdgeRemoved",C,m),r("onStructureChange"),C};return{getNode:a,getEdge:u,addNode:c,addEdge:d,moveNode:g,editEdgeLabel:v,removeNode:_,removeEdge:f,bulkAddNode:l,bulkRemoveNode:p,bulkAddEdge:h,bulkRemoveEdge:async(b,E={})=>{if(b.length===0)return;const C={...Ir,...E},m=[];for(const T of b){const y=await f(T,{broadcast:!1,history:!1,animate:C.animate});y&&m.push(y)}if(m.length!==0)return r("onBulkEdgeRemoved",m,C),m}}},lu=({subscribe:o,canvas:e,graphAtMousePosition:t})=>{const n=D(!1),r=D(!1),i=D({node:"grab",edge:"pointer","node-anchor":"grab","encapsulated-node-box":"move"}),s=D(),a=I(()=>!!s.value),u=h=>{s.value=h},c=()=>{s.value=void 0},l=h=>{var v;if(!h)return"default";if(a.value)return((v=s.value)==null?void 0:v.call(s,h))??!1?"pointer":"default";const g=i.value[h.graphType]??"default";return g==="grab"&&n.value?"grabbing":g},d=({items:h})=>{if(!e.value||r.value)return;const g=h.at(-1);e.value.style.cursor=l(g)};return o("onMouseDown",h=>{n.value=!0,d(h)}),o("onMouseUp",h=>{n.value=!1,d(h)}),o("onMouseMove",d),ct(i,()=>{d({items:t.value.items})},{deep:!0}),{graphToCursorMap:i,activateCursorSelectMode:u,deactivateCursorSelectMode:c,graphCursorDisabled:r}},du=o=>{const e=new Map,t=new Set,n=new Map;return i=>({hold:u=>{if(t.has(`${i}-${u}`))return;const l=e.get(u)??0;l===0&&(n.set(u,o.value[u]),o.value[u]=!1),e.set(u,l+1),t.add(`${i}-${u}`)},release:u=>{if(!t.has(`${i}-${u}`))return;const c=e.get(u)??0;if(c!==0){if(c===1){const l=n.get(u);if(l===void 0)throw new Error("holdState not found");o.value[u]=l,n.delete(u)}e.set(u,c-1),t.delete(`${i}-${u}`)}}})},fu=(o,e={})=>{const t=D("light"),n=Ba(),r=Za(t,n),i=D({...ja,...e}),s=du(i),a=Ua(),{subscribe:u,unsubscribe:c,emit:l}=La(a),d=D(!0);li(o,()=>{d.value=!1}),u("onMouseDown",()=>{d.value=!0});const h=di(o),g=D([]),v=D([]),_=D({coords:{x:0,y:0},items:[]}),p=lu({canvas:o,subscribe:u,graphAtMousePosition:_}),f=N=>{const B=Wr(o),$=_i(N,B);_.value={coords:$,items:T($)}},S=N=>({..._.value,event:N}),b={click:N=>{N.preventDefault(),l("onClick",S(N))},mousemove:N=>{N.preventDefault(),l("onMouseMove",S(N))},mousedown:N=>{N.preventDefault(),l("onMouseDown",S(N))},mouseup:N=>{N.preventDefault(),l("onMouseUp",S(N))},dblclick:N=>{N.preventDefault(),l("onDblClick",S(N))},contextmenu:N=>{l("onContextMenu",S(N))}},E={keydown:N=>l("onKeyDown",N),keyup:N=>l("onKeyUp",N)},{aggregator:C,updateAggregator:m,getSchemaItemsByCoordinates:T}=Ja({canvas:o,emit:l}),y=Zs(),x=N=>{const B={edges:v,getNode:M,getEdge:P,getTheme:r,settings:i,animationController:y},$=v.value.map(We=>Da(We,B)).filter(Boolean).map((We,an)=>({...We,priority:an*10})),sn=g.value.map(We=>da(We,r,y)).filter(Boolean).map((We,an)=>({...We,priority:an*10+1e3}));return N.push(...$),N.push(...sn),N};m.push(x),fi(()=>{if(!o.value)throw new Error("canvas element not found");o.value.addEventListener("mousemove",f);for(const[N,B]of Object.entries(b))o.value.addEventListener(N,B);for(const[N,B]of Object.entries(E))document.addEventListener(N,B)}),hi(()=>{if(!o.value)throw new Error("Canvas element not found");o.value.removeEventListener("mousemove",f);for(const[N,B]of Object.entries(b))o.value.removeEventListener(N,B);for(const[N,B]of Object.entries(E))document.removeEventListener(N,B)});const{nodeIdToNodeMap:A,edgeIdToEdgeMap:w}=Qa(g,v),{getNode:M,getEdge:P,addNode:L,addEdge:G,moveNode:k,editEdgeLabel:z,removeNode:X,removeEdge:Te,bulkAddNode:Oe,bulkRemoveNode:Ie,bulkAddEdge:xe,bulkRemoveEdge:Q}=cu({nodes:g,edges:v,nodeMap:A,edgeMap:w,emit:l,settings:i,animationController:y}),J=I(()=>g.value.reduce((N,B,$)=>(N.set(B.id,$),N),new Map)),ce=I(()=>v.value.reduce((N,B,$)=>(N.set(B.id,$),N),new Map)),Lt=(N,B)=>{const $=T({x:N,y:B}).pop();if($&&$.graphType==="node")return M($.id)};let vt;u("onMouseMove",({items:N})=>{const B=N.at(-1);if(!B||B.graphType!=="node")return;const $=M(B.id);$!==vt&&(l("onNodeHoverChange",$,vt),vt=$)});const ni=N=>(vt&&qr(vt.id,N),N);m.push(ni);const ri=(N,B)=>{const $={nodes:g.value,edges:v.value};g.value=N.nodes,v.value=N.edges;const sn={...ru,...B};l("onGraphLoaded",$,sn),l("onStructureChange")},oi=()=>{g.value=[],v.value=[],l("onGraphReset"),l("onStructureChange")};ct(t,async(N,B)=>{l("onThemeChange",N,B)});const ar=D(Fn(i.value));return ct(i,N=>{const B=Zo(ar.value,N);B&&(ar.value=Fn(i.value),l("onSettingsChange",B))},{deep:!0}),{nodes:g,edges:v,nodeIdToIndex:J,edgeIdToIndex:ce,getNode:M,getEdge:P,addNode:L,addEdge:G,moveNode:k,editEdgeLabel:z,removeNode:X,removeEdge:Te,bulkAddNode:Oe,bulkRemoveNode:Ie,bulkAddEdge:xe,bulkRemoveEdge:Q,getSchemaItemsByCoordinates:T,getNodeByCoordinates:Lt,eventBus:a,subscribe:u,unsubscribe:c,emit:l,updateAggregator:m,aggregator:C,animationController:y,pluginHoldController:s,baseTheme:I(()=>jo[t.value]),themeName:t,getTheme:r,themeMap:n,settings:i,load:ri,reset:oi,canvas:o,canvasFocused:d,canvasHovered:I(()=>h.value),graphAtMousePosition:_,updateGraphAtMousePosition:f,...p}},hu="use-marquee-graph",_u={THEME_ID:hu},pu=(o,e)=>{const t={at:{x:1/0,y:1/0},width:0,height:0};if(o.length<2)return t;let n=1/0,r=1/0,i=-1/0,s=-1/0;for(const a of o){const u=e.getTheme("nodeSize",a),c=e.getTheme("nodeBorderWidth",a),l=u+c/2,{x:d,y:h}=a;n=Math.min(n,d-l),r=Math.min(r,h-l),i=Math.max(i,d+l),s=Math.max(s,h+l)}return n<1/0&&r<1/0&&i>-1/0&&s>-1/0?(t.at.x=n,t.at.y=r,t.width=i-n,t.height=s-r):(t.width=0,t.height=0),t},gu=o=>{const e=D(),t=D(),n=D(),{setTheme:r,removeTheme:i}=Hr(o,_u.THEME_ID),s=()=>{r("nodeAnchorColor",O.TRANSPARENT),r("nodeAnchorColorWhenParentFocused",O.TRANSPARENT)},a=()=>{i("nodeAnchorColor"),i("nodeAnchorColorWhenParentFocused")},u=y=>{const{width:x,height:A}=y;return Math.abs(x*A)},c=({items:y,coords:x,event:A})=>{if(A.button!==lt.left)return;const w=y.at(-1);(w==null?void 0:w.graphType)!=="encapsulated-node-box"&&a(),w||g(x)},l=({items:y,coords:x})=>{if(!n.value)return;const A=y.at(-1);if((A==null?void 0:A.graphType)!=="encapsulated-node-box")return;const w=x.x-n.value.x,M=x.y-n.value.y;n.value=x;for(const P of o.focus.focusedNodes.value)o.moveNode(P.id,{x:P.x+w,y:P.y+M});p()},d=({items:y,coords:x,event:A})=>{if(A.button!==lt.left||e.value)return;const w=y.at(-1);(w==null?void 0:w.graphType)==="encapsulated-node-box"&&(n.value=x,o.emit("onGroupDragStart",o.focus.focusedNodes.value,x))},h=()=>{n.value&&(o.emit("onGroupDrop",o.focus.focusedNodes.value,n.value),n.value=void 0)},g=y=>{s(),o.graphCursorDisabled.value=!0,e.value={at:y,width:0,height:0},o.emit("onMarqueeBeginSelection",y)},v=()=>{if(!e.value)return;const y=e.value;e.value=void 0,o.graphCursorDisabled.value=!1,a(),o.emit("onMarqueeEndSelection",y)},_=y=>{if(u(y)<100)return;const A=[];for(const{id:w,shape:M,graphType:P}of o.aggregator.value){const{marqueeSelectableGraphTypes:L}=o.settings.value;if(!L.includes(P))continue;M.efficientHitbox(y)&&A.push(w)}o.focus.set(A)},p=()=>{t.value=pu(o.focus.focusedNodes.value,o)},f=({coords:y})=>{if(!e.value)return;const{x,y:A}=y;e.value.width=x-e.value.at.x,e.value.height=A-e.value.at.y,_(e.value)},S=y=>({id:"marquee-box",graphType:"marquee-box",shape:cr({...y,color:o.getTheme("marqueeSelectionBoxColor"),stroke:{color:o.getTheme("marqueeSelectionBoxBorderColor"),width:2}}),priority:1/0}),b=y=>{if(!e.value)return y;const x=S(e.value);return y.push(x),y},E=y=>({id:"encapsulated-node-box",graphType:"encapsulated-node-box",shape:cr({...y,color:o.getTheme("marqueeEncapsulatedNodeBoxColor"),stroke:{color:o.getTheme("marqueeEncapsulatedNodeBoxBorderColor"),width:2}}),priority:1/0}),C=y=>{if(!t.value)return y;const x=E(t.value);return y.push(x),y};o.updateAggregator.push(C),o.updateAggregator.push(b);const m=()=>{o.subscribe("onFocusChange",p),o.subscribe("onMouseDown",c),o.subscribe("onMouseUp",v),o.subscribe("onContextMenu",v),o.subscribe("onMouseMove",f),o.subscribe("onMouseDown",d),o.subscribe("onMouseUp",h),o.subscribe("onMouseMove",l),o.subscribe("onUndo",p),o.subscribe("onRedo",p)},T=()=>{o.unsubscribe("onFocusChange",p),o.unsubscribe("onMouseDown",c),o.unsubscribe("onMouseUp",v),o.unsubscribe("onContextMenu",v),o.unsubscribe("onMouseMove",f),o.unsubscribe("onMouseDown",d),o.unsubscribe("onMouseUp",h),o.unsubscribe("onMouseMove",l),o.unsubscribe("onUndo",p),o.unsubscribe("onRedo",p),e.value&&v()};return o.subscribe("onSettingsChange",y=>{y.marquee===!0?m():y.marquee===!1&&T()}),o.settings.value.marquee&&m(),{updateEncapsulatedNodeBox:p}},mu=o=>{const e=D(),{hold:t,release:n}=o.pluginHoldController("node-drag"),r=({items:c,coords:l,event:d})=>{if(d.button!==lt.left)return;const h=c.at(-1);if(!h||h.graphType!=="node")return;t("nodeAnchors");const g=o.getNode(h.id);g&&(e.value={node:g,coords:l},o.emit("onNodeDragStart",g))},i=()=>{e.value&&(o.emit("onNodeDrop",e.value.node),n("nodeAnchors"),o.nodeAnchors.setParentNode(e.value.node.id),e.value=void 0)},s=({coords:c})=>{if(!e.value)return;const{node:l,coords:d}=e.value,h=c.x-d.x,g=c.y-d.y;o.moveNode(l.id,{x:l.x+h,y:l.y+g}),e.value.coords=c},a=()=>{o.subscribe("onMouseDown",r),o.subscribe("onMouseUp",i),o.subscribe("onMouseMove",s),o.graphToCursorMap.value.node="grab"},u=()=>{o.unsubscribe("onMouseDown",r),o.unsubscribe("onMouseUp",i),o.unsubscribe("onMouseMove",s),o.graphToCursorMap.value.node="pointer",e.value&&i()};return o.subscribe("onSettingsChange",c=>{c.draggable===!1?u():c.draggable===!0&&a()}),o.settings.value.draggable&&a(),o.settings.value.draggable||u(),{currentlyDraggingNode:I(()=>{var c;return(c=e.value)==null?void 0:c.node})}},vu=o=>{const e=D(),t=D(),n=m=>{if(o.settings.value.nodeAnchors===!1)return;const T=o.getNode(m);if(!T)throw new Error("node not found");o.animationController.isAnimating(T.id)||(e.value=T,c(T))},r=()=>{e.value=void 0,t.value=void 0},i=D(),s=({items:m})=>{const T=m.at(-1);if(!T)return i.value=void 0;i.value=T.id},a=m=>{var M;const{getTheme:T}=o,y=T("nodeAnchorColor",m),x=T("nodeAnchorColorWhenParentFocused",m),A=T("nodeAnchorRadius",m),w=[];for(const P of u.value){const{x:L,y:G,id:k}=P,z=k===i.value||k===((M=t.value)==null?void 0:M.id),X={at:{x:L,y:G},radius:A,color:z?x:y};t.value&&t.value.direction===P.direction&&(X.at.x=t.value.x,X.at.y=t.value.y);const Te=Zt(X);w.push({id:P.id,graphType:"node-anchor",shape:Te,priority:1/0})}return w},u=D([]),c=m=>{if(!m)return u.value=[];const{getTheme:T}=o,y=T("nodeAnchorRadius",m),x=T("nodeSize",m),A=T("nodeBorderWidth",m),w=x-y/3+A/2;u.value=[{x:m.x,y:m.y-w,direction:"north"},{x:m.x+w,y:m.y,direction:"east"},{x:m.x,y:m.y+w,direction:"south"},{x:m.x-w,y:m.y,direction:"west"}].map(M=>({...M,id:qt()}))},l=({items:m,event:T})=>{if(T.button!==lt.left)return;const y=m.at(-1);if(!y||y.graphType!=="node-anchor")return;const{id:x}=y;return u.value.find(A=>A.id===x)},d=()=>{if(!e.value||!t.value)return;const{x:m,y:T}=t.value,y={x:e.value.x,y:e.value.y},x={x:m,y:T},{getTheme:A}=o,w=A("linkPreviewColor",e.value,t.value),M=A("linkPreviewWidth",e.value,t.value);return{id:"link-preview",graphType:"link-preview",shape:it({start:y,end:x,color:w,width:M})}},h=({items:m})=>{if(t.value)return;const T=m.at(-1);if(!T)return r();if(T.graphType!=="node")return;const y=o.getNode(T.id);if(!y)throw new Error("node in aggregator but not in graph");const x=o.focus.isFocused(y.id),A=o.focus.focusedNodes.value.length>1;if(x&&A)return r();n(y.id),c(y)},g=m=>{if(!e.value)return;const T=l(m);T&&(t.value=T,o.emit("onNodeAnchorDragStart",e.value,T))},v=({coords:m})=>{if(!t.value)return;const{x:T,y}=m;t.value.x=T,t.value.y=y},_=()=>{if(t.value){if(!e.value)throw new Error("active anchor without parent node")}else return;o.emit("onNodeAnchorDrop",e.value,t.value),r()},p=m=>{if(!e.value)return m;const T=a(e.value);for(const y of T)m.push(y);return m},f=m=>{var w;if(!e.value||!t.value)return m;const{id:T}=e.value;qr(T,m);const y=(w=m.find(M=>M.id===T))==null?void 0:w.priority;if(!y)return m;const x=d();if(!x)return m;const A={...x,priority:y-.1};return m.push(A),m};o.updateAggregator.push(p),o.updateAggregator.push(f);const S=m=>{var T;((T=e.value)==null?void 0:T.id)===m.id&&r()},b=()=>{if(!e.value)return;const m=o.focus.isFocused(e.value.id),T=o.focus.focusedNodes.value.length>1;m&&T&&r()},E=()=>{o.subscribe("onNodeRemoved",S),o.subscribe("onNodeMoved",r),o.subscribe("onNodeDrop",c),o.subscribe("onMouseMove",h),o.subscribe("onMouseMove",v),o.subscribe("onMouseMove",s),o.subscribe("onMouseDown",g),o.subscribe("onMouseUp",_),o.subscribe("onFocusChange",b)},C=()=>{o.unsubscribe("onNodeRemoved",S),o.unsubscribe("onNodeMoved",r),o.unsubscribe("onNodeDrop",c),o.unsubscribe("onMouseMove",h),o.unsubscribe("onMouseMove",v),o.unsubscribe("onMouseMove",s),o.unsubscribe("onMouseDown",g),o.unsubscribe("onMouseUp",_),o.unsubscribe("onFocusChange",b),r()};return o.subscribe("onSettingsChange",m=>{m.nodeAnchors===!0?E():m.nodeAnchors===!1&&C()}),o.settings.value.nodeAnchors&&E(),{currentDraggingAnchor:bn(t),parentNode:bn(e),setParentNode:n}};var Qo=["ctrl","alt","meta","shift"],Jo="__0_1_2_3_4_5_6_7_8_9_a_b_c_d_e_f_g_h_i_j_k_l_m_n_o_p_q_r_s_t_u_v_w_x_y_z_ _`_'_\"_~_!_@_#_$_%_^_&_*_(_)_._-_+_=_[_]_{_}_<_>_,_/_?_;_:_\\_|_capslock_numlock_enter_tab_arrowdown_arrowleft_arrowright_arrowup_end_home_pagedown_pageup_backspace_delete_insert_escape_f1_f2_f3_f4_f5_f6_f7_f8_f9_f10_f11_f12_f13_f14_f15_f16_f17_f18_f19_f20_f21_f22_f23".split("_");Jo[1]="_";var or={};for(let[o,e]of Jo.entries())or[e]=o;var yu={space:" ",plus:"+",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright",esc:"escape"},ir=4,bu=9,sr=bu+ir,Tu=2**ir,ei=2**sr,xu=2**(2*sr),Su=2**(3*sr);function Cu(o){let e;return o==="+"?["+"]:(o.slice(-1)=="+"?(e=o.slice(0,-2).split("+"),e.push("+")):e=o.split("+"),e.map(t=>yu[t]||t))}function Eu(o){let e=new Set(o),t=or[o[o.length-1].toLowerCase()]||0;for(let n of Qo)t=2*t+(e.has(n)?1:0);return t}function Rr(o){return o>>ir}function mn(o){return o%Tu}function Au(o,e){if(o===void 0||Rr(o)>0)return!1;let t=mn(o),n=mn(e);return t===n&&Rr(e)===0?!1:(t&mn(e))===t}function wu(o){let e=or[o.key.toLowerCase()]||0;for(let t of Qo)e=2*e+(o[`${t}Key`]?1:0);return e}function rn(o){return o.map(Cu)}function on(o){if(o.length>4)throw"Can't encode sequence of more than 4 keys!";let e=0;for(let t of o)e=e*ei+Eu(t);return e}function Ou(o){return o<ei?1:o<xu?2:o<Su?3:4}function Nu(o){let e=[],t=0,n=0;for(let r=o.length-1;r>=0;r--)t=2**n*o[r]+t,n=n+13,e.push(t);return e}function Mu(o={}){return{history:[],historySize:0,bindings:new Map,disabledSequenceCodes:new Set,...o}}function Du(o,e,t){let n=on(rn(e));return o.bindings.has(n)||o.bindings.set(n,new Set),o.bindings.get(n).add(t),ti(o)}function Pu(o,e,t){let n=on(rn(e)),r=o.bindings.get(n);return r&&(r.delete(t),r.size==0&&o.bindings.delete(n)),ti(o)}function Iu(o,e){let t=on(rn(e));return o.disabledSequenceCodes.delete(t),o}function Ru(o,e){let t=on(rn(e));return o.disabledSequenceCodes.add(t),o}function ku(o,e){let t=wu(e),n=o.history.at(-1);return Au(n,t)&&o.history.pop(),o.history.push(t),o.history.length>o.historySize&&o.history.shift(),o}function Bu(o){let e=[];for(let t of Nu(o.history))o.disabledSequenceCodes.has(t)||e.push(...o.bindings.get(t)||[]);return e}function Fu(o,e){o=ku(o,e);let t=Bu(o);for(let n of t)n(e);return[o,t]}function ti(o){o.historySize=0;for(let e of o.bindings.keys())o.historySize=Math.max(o.historySize,Ou(e));return o}var Lu=class{constructor(o){this.state=o,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.handle=this.handle.bind(this)}add(...o){let e=o.slice(0,-1),t=o.at(-1);return this.state=Du(this.state,e,t),this}remove(...o){let e=o.slice(0,-1),t=o.at(-1);return this.state=Pu(this.state,e,t),this}enable(...o){return this.state=Iu(this.state,o),this}disable(...o){return this.state=Ru(this.state,o),this}handle(o){let[e,t]=Fu(this.state,o);return this.state=e,t.length>0}};function Uu(){return new Lu(Mu())}var zu=Uu;const kr=window.navigator.userAgent.includes("Mac")?"Mac":"Windows",Gu=o=>{const{settings:e}=o,t=zu(),n=()=>{if(o.annotation.isActive.value&&o.annotation.undo(),e.value.interactive){const m=o.history.undo();if(!m)return;o.focus.set(m.affectedItems.map(T=>T.data.id))}},r=()=>{if(o.annotation.isActive.value){o.annotation.redo();return}if(e.value.interactive){const m=o.history.redo();if(!m)return;o.focus.set(m.affectedItems.map(T=>T.data.id))}},i=()=>o.focus.reset(),s=()=>o.focus.all(),a=()=>{e.value.interactive!==!1&&(o.bulkRemoveNode([...o.focus.focusedItemIds.value]),o.bulkRemoveEdge([...o.focus.focusedItemIds.value]))},u=()=>lr(dr/2),c=()=>lr(-(dr/2)),l=(m,T)=>T===!1?()=>{}:typeof T=="function"?T:m,d=I(()=>l(r,e.value.shortcutRedo)),h=I(()=>l(n,e.value.shortcutUndo)),g=I(()=>l(i,e.value.shortcutEscape)),v=I(()=>l(s,e.value.shortcutSelectAll)),_=I(()=>l(a,e.value.shortcutDelete)),p=I(()=>l(u,e.value.shortcutZoomIn)),f=I(()=>l(c,e.value.shortcutZoomOut)),S=I(()=>({Mac:{Undo:{binding:"meta+z",trigger:h.value},Redo:{binding:"meta+shift+z",trigger:d.value},Delete:{binding:"backspace",trigger:_.value},"Select All":{binding:"meta+a",trigger:v.value},Deselect:{binding:"escape",trigger:g.value},"Zoom In":{binding:"=",trigger:p.value},"Zoom Out":{binding:"-",trigger:f.value}},Windows:{Undo:{binding:"ctrl+Z",trigger:h.value},Redo:{binding:"ctrl+shift+Z",trigger:d.value},Delete:{binding:"delete",trigger:_.value},"Select All":{binding:"ctrl+a",trigger:v.value},Deselect:{binding:"escape",trigger:g.value},"Zoom In":{binding:"=",trigger:p.value},"Zoom Out":{binding:"-",trigger:f.value}}})),b=Object.values(S.value[kr]);for(const m of b){const T=m.binding;t.add(T,y=>{y==null||y.preventDefault(),m.trigger()})}const E=()=>{o.subscribe("onKeyDown",t.handle)},C=()=>{o.unsubscribe("onKeyDown",t.handle)};return e.value.shortcuts&&E(),o.subscribe("onSettingsChange",m=>{m.shortcuts===!0?E():m.shortcuts===!1&&C()}),{activeShortcuts:S.value[kr],trigger:{delete:_,selectAll:v,escape:g,redo:d,undo:h}}},Wu=[O.RED_600,O.BLUE_600,O.GREEN_600,O.YELLOW_600],qu=[3,6,9,12],Br=100,Hu=o=>{const e=D([]),t=D([]);return{clearHistory:()=>{e.value=[],t.value=[]},undo:()=>{const u=e.value.pop();if(!u)return;const{action:c,annotations:l}=u,d=l.map(({id:h})=>h);c==="add"?o.value=o.value.filter(({id:h})=>!d.includes(h)):c==="remove"&&o.value.push(...l),t.value.push(u)},redo:()=>{const u=t.value.pop();if(!u)return;const{action:c,annotations:l}=u,d=l.map(({id:h})=>h);c==="add"?o.value.push(...l):c==="remove"&&(o.value=o.value.filter(({id:h})=>!d.includes(h))),e.value.push(u)},addToUndoStack:u=>{e.value.push(u),e.value.length>Br&&e.value.shift()},addToRedoStack:u=>{t.value.push(u),t.value.length>Br&&t.value.shift()},canUndo:I(()=>e.value.length!==0),canRedo:I(()=>t.value.length!==0)}},vn=10,Yu=pi(),Vu=o=>{const e=D(Wu[0]),t=D(qu[1]),n=D(!1),r=D(!1),i=D(),s=D(Date.now()),a=D(new Set),u=D([]),c=D([]),l=D(!1),d=D(),h=D(!1),g=Hu(c),v=()=>{c.value.length!==0&&(g.addToUndoStack({action:"remove",annotations:c.value}),c.value=[])},_=()=>{i.value||(i.value=setInterval(()=>{Date.now()-s.value>50&&r.value&&u.value.length>=2&&u.value.shift()},50))},p=({coords:y,event:x})=>{if(x.button===lt.left){if(n.value){const A=ur({at:y,radius:vn})(),w=c.value.filter(M=>tt.scribble(M).efficientHitbox(A));for(const M of w)a.value.add(M.id)}l.value=!0,d.value=y,u.value=[y]}},f=({coords:y})=>{if(!(!l.value||!d.value)&&u.value.length!==0){if(n.value){const x=ur({at:y,radius:vn})(),A=c.value.filter(w=>tt.scribble(w).efficientHitbox(x));for(const w of A)a.value.add(w.id);return}d.value=y,u.value.push(y),r.value&&u.value.length>10&&u.value.shift(),r.value&&_(),s.value=Date.now()}},S=()=>{if(!l.value)return;if(l.value=!1,d.value=void 0,n.value){const x=c.value.filter(A=>a.value.has(A.id));g.addToUndoStack({action:"remove",annotations:x}),c.value=c.value.filter(A=>!a.value.has(A.id)),a.value.clear();return}if(r.value){i.value=void 0;return}const y={id:qt(),type:"draw",points:u.value,color:e.value,brushWeight:t.value};c.value.push(y),g.addToUndoStack({action:"add",annotations:[y]}),u.value=[]},b=I(()=>n.value||r.value);ct(b,()=>{o.canvas.value&&(o.canvas.value.style.cursor=b.value?"none":"crosshair")});const E=y=>{if(!h.value)return y;if(n.value&&o.canvasHovered.value){const x=tt.circle({at:o.graphAtMousePosition.value.coords,radius:vn,color:O.TRANSPARENT,stroke:{color:Yu.value.contrast,width:2}});y.push({graphType:"annotation",id:x.id,shape:x,priority:5050})}else if(u.value.length>0&&l.value){const x=tt.scribble({type:"draw",points:u.value,color:e.value,brushWeight:t.value});y.push({graphType:"annotation",id:x.id,shape:x,priority:5001})}else if(r.value&&o.canvasHovered.value){const x=tt.circle({at:o.graphAtMousePosition.value.coords,radius:t.value,color:e.value});y.push({graphType:"annotation",id:x.id,shape:x,priority:5050})}for(const x of c.value){const A=a.value.has(x.id);y.push({graphType:"annotation",id:x.id,shape:tt.scribble({...x,color:x.color+(A?"50":"")}),priority:5e3})}return y};return o.updateAggregator.push(E),{clear:v,isActive:h,annotations:c,isLaserPointing:r,isErasing:n,color:e,brushWeight:t,activate:()=>{o.canvas.value&&(h.value=!0,o.settings.value.interactive=!1,o.settings.value.marquee=!1,o.settings.value.focusable=!1,o.settings.value.draggable=!1,o.graphCursorDisabled.value=!0,o.canvas.value.style.cursor="crosshair",o.subscribe("onMouseDown",p),o.subscribe("onMouseMove",f),o.subscribe("onMouseUp",S))},deactivate:()=>{o.canvas.value&&(h.value=!1,n.value=!1,o.settings.value.interactive=!0,o.settings.value.marquee=!0,o.settings.value.focusable=!0,o.settings.value.draggable=!0,o.graphCursorDisabled.value=!1,o.canvas.value.style.cursor="default",o.unsubscribe("onMouseDown",p),o.unsubscribe("onMouseMove",f),o.unsubscribe("onMouseUp",S))},load:y=>{c.value=y},undo:g.undo,redo:g.redo,canUndo:g.canUndo,canRedo:g.canRedo}},Ku=["node","edge"],Xu="use-focus-graph",$u=o=>{const{setTheme:e}=Hr(o,Xu),t=D(new Set),n=D(!1),r=f=>{const S=f.filter(m=>!o.settings.value.focusBlacklist.includes(m));if(S.length===t.value.size&&S.every(m=>t.value.has(m)))return;const C=new Set([...t.value]);t.value=new Set(S),o.emit("onFocusChange",t.value,C)},i=f=>{if(t.value.has(f)||o.settings.value.focusBlacklist.includes(f))return;const E=new Set([...t.value]);t.value.add(f),o.emit("onFocusChange",t.value,E)},s=f=>{var b,E;const S=Wr(o.canvas);(E=(b=f.shape).activateTextArea)==null||E.call(b,S,C=>{const m=o.getEdge(f.id);if(!m)throw new Error("textarea only implemented for edges");const T=o.settings.value.edgeInputToLabel(C);T===void 0||m.label===T||o.editEdgeLabel(m.id,T)})},a=()=>{const f=Array.from(t.value),S=f.filter(b=>o.getNode(b)||o.getEdge(b));S.length!==f.length&&r(S)},u=({items:f,coords:S,event:b})=>{var y,x;if(b.button!==lt.left)return;const E=f.at(-1);if(!E)return n.value?void 0:c();if(((x=(y=E.shape).textHitbox)==null?void 0:x.call(y,S))&&o.settings.value.edgeLabelsEditable&&E.graphType==="edge")return c(),s(E);Ku.some(A=>A===E.graphType)&&(n.value?i(E.id):r([E.id]))},c=()=>r([]),l=()=>{const f=o.nodes.value.map(b=>b.id),S=o.edges.value.map(b=>b.id);r([...f,...S])},d=({id:f},{focus:S})=>{S&&r([f])},h=f=>t.value.has(f);e("nodeColor",f=>{if(h(f.id))return o.getTheme("nodeFocusColor",f)}),e("nodeBorderColor",f=>{if(h(f.id))return o.getTheme("nodeFocusBorderColor",f)}),e("nodeTextColor",f=>{if(h(f.id))return o.getTheme("nodeFocusTextColor",f)}),e("edgeColor",f=>{if(h(f.id))return o.getTheme("edgeFocusColor",f)}),e("edgeTextColor",f=>{if(h(f.id))return o.getTheme("edgeFocusTextColor",f)}),e("nodeAnchorColor",f=>{if(h(f.id))return o.getTheme("nodeAnchorColorWhenParentFocused",f)});const g=f=>{f.key==="Shift"&&(n.value=!0)},v=f=>{f.key==="Shift"&&(n.value=!1)},_=()=>{o.subscribe("onNodeAdded",d),o.subscribe("onEdgeAdded",d),o.subscribe("onMouseDown",u),o.subscribe("onKeyDown",g),o.subscribe("onKeyUp",v),o.subscribe("onStructureChange",a)},p=()=>{o.unsubscribe("onNodeAdded",d),o.unsubscribe("onEdgeAdded",d),o.unsubscribe("onMouseDown",u),o.unsubscribe("onKeyDown",g),o.unsubscribe("onKeyUp",v),o.unsubscribe("onStructureChange",a),c()};return o.subscribe("onSettingsChange",f=>{f.focusable===!1?p():f.focusable===!0&&_()}),o.settings.value.focusable&&_(),{set:r,reset:c,add:i,all:l,isFocused:h,focusedItemIds:bn(t),focusedNodes:I(()=>o.nodes.value.filter(f=>h(f.id))),focusedEdges:I(()=>o.edges.value.filter(f=>h(f.id)))}},ju={focus:!0},Zu={focus:!0},Fr=100,Lr=3,Qu=o=>{const e=D([]),t=D([]),n=p=>{e.value.push(p),e.value.length>Fr&&e.value.shift()},r=p=>{t.value.push(p),t.value.length>Fr&&t.value.shift()},i=D([]),s=D([]),u=ki(()=>{if(i.value.length===0&&s.value.length===0)return;const p=i.value.map(S=>({graphType:"node",data:S})),f=s.value.map(S=>({graphType:"edge",data:S}));n({action:"remove",affectedItems:[...p,...f]}),i.value=[],s.value=[]},250);o.subscribe("onNodeAdded",(p,{history:f})=>{f&&n({action:"add",affectedItems:[{graphType:"node",data:p}]})}),o.subscribe("onBulkNodeAdded",(p,{history:f})=>{f&&n({action:"add",affectedItems:p.map(S=>({graphType:"node",data:S}))})}),o.subscribe("onNodeRemoved",(p,f,{history:S})=>{if(!S)return;const b=f.map(E=>({graphType:"edge",data:E}));n({action:"remove",affectedItems:[{graphType:"node",data:p},...b]})}),o.subscribe("onBulkNodeRemoved",(p,f,{history:S})=>{S&&(i.value.push(...p),s.value.push(...f),u())}),o.subscribe("onEdgeLabelEdited",(p,f,{history:S})=>{S&&n({action:"edit",affectedItems:[{graphType:"edge",data:{id:p.id,from:f,to:p.label}}]})}),o.subscribe("onEdgeAdded",(p,{history:f})=>{f&&n({action:"add",affectedItems:[{graphType:"edge",data:p}]})}),o.subscribe("onBulkEdgeAdded",(p,{history:f})=>{f&&n({action:"add",affectedItems:p.map(S=>({graphType:"edge",data:S}))})}),o.subscribe("onEdgeRemoved",(p,{history:f})=>{f&&n({action:"remove",affectedItems:[{graphType:"edge",data:p}]})}),o.subscribe("onBulkEdgeRemoved",(p,{history:f})=>{f&&(s.value.push(...p),u())}),o.subscribe("onGraphLoaded",(p,{history:f})=>{if(!f)return;const S=p.nodes.map(E=>({graphType:"node",data:E})),b=p.edges.map(E=>({graphType:"edge",data:E}));n({action:"load",affectedItems:[...o.nodes.value.map(E=>({graphType:"node",data:E})),...o.edges.value.map(E=>({graphType:"edge",data:E}))],previousState:{nodes:S,edges:b}})});const c=D();o.subscribe("onGroupDragStart",(p,f)=>{c.value={startingCoordinates:f,nodes:p}}),o.subscribe("onGroupDrop",(p,f)=>{if(!c.value)throw new Error("dropped a group we didn't know was being dragged");if(c.value.nodes.length!==p.length)throw new Error("group size mismatch");const S=c.value.startingCoordinates.y-f.y,b=c.value.startingCoordinates.x-f.x;Math.sqrt(S**2+b**2)<Lr||n({action:"move",affectedItems:c.value.nodes.map(C=>({graphType:"node",data:{id:C.id,from:{x:C.x+b,y:C.y+S},to:{x:C.x,y:C.y}}}))})});const l=D();o.subscribe("onNodeDragStart",p=>{l.value={id:p.id,from:{x:p.x,y:p.y},to:{x:p.x,y:p.y}}}),o.subscribe("onNodeDrop",p=>{if(!l.value)throw new Error("dropped a node we didn't know was being dragged");if(l.value.id!==p.id)throw new Error("node ID mismatch");l.value.to={x:p.x,y:p.y};const f=l.value.from.y-l.value.to.y,S=l.value.from.x-l.value.to.x;Math.sqrt(f**2+S**2)<Lr||n({action:"move",affectedItems:[{graphType:"node",data:l.value}]})});const d=(p={})=>{const f=e.value.pop();if(f)return r(f),g(f),o.emit("onUndo",f,{...ju,...p}),f},h=(p={})=>{const f=t.value.pop();if(f)return n(f),v(f),o.emit("onRedo",f,{...Zu,...p}),f},g=p=>{if(p.action==="load")o.load({nodes:p.previousState.nodes.map(f=>f.data),edges:p.previousState.edges.map(f=>f.data)},{history:!1});else if(p.action==="add")for(const f of p.affectedItems)f.graphType==="node"?o.removeNode(f.data.id,{history:!1}):f.graphType==="edge"&&o.removeEdge(f.data.id,{history:!1});else if(p.action==="remove")for(const f of p.affectedItems)f.graphType==="node"?o.addNode(f.data,{history:!1,focus:!1}):f.graphType==="edge"&&o.addEdge(f.data,{history:!1,focus:!1});else if(p.action==="move"){for(const f of p.affectedItems)if(f.graphType==="node"){const{from:S,id:b}=f.data;o.moveNode(b,{x:S.x,y:S.y})}}else if(p.action==="edit")for(const f of p.affectedItems)o.editEdgeLabel(f.data.id,f.data.from,{history:!1})},v=p=>{if(p.action==="load")o.load({nodes:p.affectedItems.filter(f=>f.graphType==="node").map(f=>f.data),edges:p.affectedItems.filter(f=>f.graphType==="edge").map(f=>f.data)},{history:!1});else if(p.action==="add")for(const f of p.affectedItems)f.graphType==="node"?o.addNode(f.data,{history:!1,focus:!1}):f.graphType==="edge"&&o.addEdge(f.data,{history:!1,focus:!1});else if(p.action==="remove")for(const f of p.affectedItems)f.graphType==="node"?o.removeNode(f.data.id,{history:!1}):f.graphType==="edge"&&o.removeEdge(f.data.id,{history:!1});else if(p.action==="move"){for(const f of p.affectedItems)if(f.graphType==="node"){const{to:S,id:b}=f.data;o.moveNode(b,{x:S.x,y:S.y})}}else if(p.action==="edit")for(const f of p.affectedItems)o.editEdgeLabel(f.data.id,f.data.to,{history:!1})},_=()=>{e.value=[],t.value=[]};return{undo:d,redo:h,canUndo:I(()=>e.value.length>0),canRedo:I(()=>t.value.length>0),undoStack:e,redoStack:t,addToUndoStack:n,addToRedoStack:r,clearHistory:_}},Ju=o=>{const e={get:()=>JSON.parse(localStorage.getItem(o.settings.value.persistentStorageKey+"-nodes")??"[]"),set:u=>{const c=u.filter(l=>!o.settings.value.persistentBlacklist.has(l.id));localStorage.setItem(o.settings.value.persistentStorageKey+"-nodes",JSON.stringify(c))}},t={get:()=>JSON.parse(localStorage.getItem(o.settings.value.persistentStorageKey+"-edges")??"[]"),set:u=>{const c=u.filter(l=>!o.settings.value.persistentBlacklist.has(l.id));localStorage.setItem(o.settings.value.persistentStorageKey+"-edges",JSON.stringify(c))}},n=async()=>{await new Promise(u=>setTimeout(u,10)),e.set(o.nodes.value),t.set(o.edges.value)},r=()=>o.load({nodes:e.get(),edges:t.get()},{history:!1}),i=["onStructureChange","onNodeDrop","onGroupDrop"],s=()=>{i.forEach(u=>o.subscribe(u,n))},a=()=>{i.forEach(u=>o.unsubscribe(u,n))};return o.subscribe("onSettingsChange",u=>{if(a(),"persistent"in u&&!u.persistent)return;if("persistent"in u&&u.persistent){r(),s();return}"persistentStorageKey"in u&&r(),s()}),o.settings.value.persistent&&(queueMicrotask(r),s()),{trackGraphState:n}},ec={durationMs:300,broadcast:!0,history:!0,persist:!0},tc=o=>({node:async t=>{const{nodeId:n,endCoords:r,durationMs:i,history:s,broadcast:a,persist:u}={...ec,...t};if(i<100)throw new Error(`durationMs must be greater than 100, got ${i}`);const c=o.getNode(n);if(!c)throw new Error(`Node with id ${n} not found`);const l={x:c.x,y:c.y},{coords:d,timePerFrameMs:h}=ra({start:l,end:r,durationMs:i});for(let g=0;g<d.length;g++)await new Promise(v=>setTimeout(v,h)),o.moveNode(c.id,d[g],{broadcast:a}),o.focus.isFocused(c.id)&&o.marquee.updateEncapsulatedNodeBox();s&&o.history.addToUndoStack({action:"move",affectedItems:[{graphType:"node",data:{id:t.nodeId,from:l,to:t.endCoords}}]}),u&&await o.persistent.trackGraphState()}}),nc=o=>{const e=({coords:s,event:a})=>{var l;((l=o.getSchemaItemsByCoordinates(s).at(-1))==null?void 0:l.graphType)==="node"||!o.addNode(s)||setTimeout(()=>o.updateGraphAtMousePosition(a),10)},t=(s,a)=>{if(o.settings.value.userAddedEdgeRuleNoSelfLoops&&s.id===a.id)return!1;if(o.settings.value.userAddedEdgeRuleOneEdgePerPath){const u=o.edges.value.find(d=>d.from===s.id&&d.to===a.id),c=o.edges.value.find(d=>d.from===a.id&&d.to===s.id);if(u||c)return!1}return!0},n=(s,a)=>{const c=o.getSchemaItemsByCoordinates(a).findLast(h=>h.graphType==="node");if(!c)return;const l=o.getNode(c.id);!l||!t(s,l)||o.addEdge({from:s.id,to:l.id,label:o.settings.value.userAddedEdgeLabel})},r=()=>{o.subscribe("onDblClick",e),o.subscribe("onNodeAnchorDrop",n),o.settings.value.nodeAnchors=!0,o.settings.value.edgeLabelsEditable=!0},i=()=>{o.unsubscribe("onDblClick",e),o.unsubscribe("onNodeAnchorDrop",n),o.settings.value.nodeAnchors=!1,o.settings.value.edgeLabelsEditable=!1};o.settings.value.interactive&&r(),o.settings.value.interactive||i(),o.subscribe("onSettingsChange",s=>{s.interactive===!0?r():s.interactive===!1&&i()})},rc=({adjacencyList:o,undirectedAdjacencyList:e})=>{const t=(s,a)=>{const u=new Set,c=[];for(c.push(a);c.length>0;){const l=c.shift();if(!l)break;u.add(l),s[l].forEach(h=>{u.has(h)||c.push(h)})}return u},n=s=>Object.keys(s).every(a=>t(s,a).size===Object.keys(s).length),r=I(()=>n(o.value)),i=I(()=>n(e.value));return{isConnected:r,isWeaklyConnected:i}};class oc{constructor(e){yt(this,"V");yt(this,"adj");yt(this,"Time");yt(this,"SCCs",[]);this.V=e,this.adj=new Array(e).fill(0).map(()=>[]),this.Time=0}addEdge(e,t){this.adj[e].push(t)}SCCUtil(e,t,n,r,i){n[e]=this.Time,t[e]=this.Time,this.Time+=1,r[e]=!0,i.push(e);for(const s of this.adj[e])n[s]===-1?(this.SCCUtil(s,t,n,r,i),t[e]=Math.min(t[e],t[s])):r[s]&&(t[e]=Math.min(t[e],n[s]));if(t[e]===n[e]){let s;const a=[];do s=i.pop(),a.push(s),r[s]=!1;while(s!==e);this.SCCs.push(a)}}SCC(){const e=new Array(this.V).fill(-1),t=new Array(this.V).fill(-1),n=new Array(this.V).fill(!1),r=[];for(let i=0;i<this.V;i++)e[i]===-1&&this.SCCUtil(i,t,e,n,r);return this.SCCs}}const ic=(o,e)=>{const t=new oc(o.length),n=o.map(i=>i.id);for(const i of e)t.addEdge(n.indexOf(i.from),n.indexOf(i.to));return t.SCC().map(i=>i.map(s=>o[s]))},sc=o=>{const{nodes:e,edges:t,adjacencyList:n}=o,r=I(()=>ic(e.value,t.value)),i=I(()=>r.value.reduce((u,c,l)=>{for(const{id:d}of c)u.set(d,l);return u},new Map)),s=I(()=>{const a=r.value,u=n.value,c=i.value;return a.reduce((l,d,h)=>{const g=d.flatMap(v=>u[v.id]??[]).filter(v=>c.get(v)!==h).map(v=>c.get(v));return l.set(h,new Set(g)),l},new Map)});return{stronglyConnectedComponents:r,nodeIdToConnectedComponent:i,componentAdjacencyMap:s}},ac=o=>{const e={},t=[[],[]],n={...o};Object.keys(o).forEach(s=>{n[s]||(n[s]=[])});const r={};Object.entries(n).forEach(([s,a])=>{a.forEach(u=>{r[u]||(r[u]=[]),r[u].push(s)})});const i=s=>{const a=[s];for(e[s]=0,t[0].push(s);a.length>0;){const u=a.shift(),c=e[u],l=c===0?1:0,d=n[u]||[],h=r[u]||[],g=[...new Set([...d,...h])];for(const v of g)if(e[v]===void 0)e[v]=l,t[l].push(v),a.push(v);else if(e[v]===c)return!1}return!0};for(const s of Object.keys(n))if(e[s]===void 0&&!i(s))return;return t},uc=o=>{const e=I(()=>ac(o.value)),t=I(()=>{const r=e.value,i=new Map;if(!r)return i;const[s,a]=r;for(const u of s)i.set(u,0);for(const u of a)i.set(u,1);return i}),n=I(()=>e.value!==void 0);return{bipartitePartition:e,nodeIdToBipartitePartition:t,isBipartite:n}},cc=o=>{const e=new Set,t=[],n=[],r=new Set,i=(a,u)=>{e.add(a),n.push(a),r.add(a);for(const c of o[a]||[])if(!e.has(c))i(c,a);else if(c!==u&&r.has(c)){const l=n.indexOf(c),h=[...n.slice(l)].sort();t.some(g=>s(g,h))||t.push(h)}n.pop(),r.delete(a)},s=(a,u)=>a.length!==u.length?!1:a.every(c=>u.includes(c));for(const a in o)e.has(a)||i(a,null);return t},lc=o=>{const{settings:e,stronglyConnectedComponents:t,adjacencyList:n}=o,r=I(()=>{const{isGraphDirected:a}=e.value;return a?t.value.filter(u=>u.length>1).map(u=>u.map(c=>c.id)):cc(n.value).sort((c,l)=>c.length-l.length)}),i=I(()=>r.value.reduce((a,u,c)=>{for(const l of u)a.set(l,c);return a},new Map)),s=I(()=>r.value.length===0);return{cycles:r,nodeIdToCycle:i,isAcyclic:s}},dc=o=>{const e=I(()=>{const n=o.edges.value;return n.filter(r=>r.from!==r.to).filter(r=>n.some(i=>r.from===i.to&&r.to===i.from))}),t=I(()=>e.value.length>0);return{bidirectionalEdges:e,hasBidirectionalEdges:t}},fc=o=>({isComplete:I(()=>{const t=o.settings.value.isGraphDirected,n=o.nodes.value.length;return o.edges.value.length===(t?n*(n-1):n*(n-1)/2)})}),hc=o=>{const e=rc(o),t=dc(o),n=sc(o),r=uc(o.adjacencyList),i=lc({...o,...n});return{...fc(o),...i,...n,...t,...r,...e}},_c="auto",pc=o=>{const e=gi(),t=mi("preferred-theme",_c);return ct(e,()=>{t.value==="auto"&&(o.themeName.value=e.value?"dark":"light")},{immediate:!0}),ct(t,()=>{t.value==="auto"?o.themeName.value=e.value?"dark":"light":o.themeName.value=t.value},{immediate:!0}),{preferredTheme:t}},gc=o=>({getParentsOfNode:e=>vi(e,o),getAncestorsOfNode:e=>yi(e,o),getChildrenOfNode:e=>bi(e,o),getDescendantsOfNode:e=>Ti(e,o),getConnectedNodes:e=>yn(e,o),getConnectedEdges:e=>Gr(e,o),getInboundEdges:e=>xi(e,o),getOutboundEdges:e=>Si(e,o),isEdgeFlowingIntoNode:(e,t)=>Ci(e,t,o),isEdgeFlowingOutOfNode:(e,t)=>Ei(e,t,o),getEdgesAlongPath:(e,t)=>zr(e,t,o),getEdgeWeight:e=>Ai(e,o),getEdgeWeightFraction:e=>wi(e,o),getWeightBetweenNodes:(e,t)=>Oi(e,t,o)}),Tc=(o,e={})=>{const t=fu(o,e),n=$u(t),r=Qu(t),i=gu({...t,focus:n}),s=vu({...t,focus:n}),a=mu({...t,nodeAnchors:s}),u=Vu(t),c=Ju(t),l=pc(t),d=Gu({...t,history:r,focus:n,annotation:u}),h=Ni(t),g=Mi({...t,adjacencyList:h}),v=hc({...t,...h}),_=tc({...t,history:r,focus:n,marquee:i,persistent:c});nc(t);const p=gc(t);return{...t,focus:n,history:r,marquee:i,nodeDrag:a,nodeAnchors:s,annotation:u,persistent:c,animate:_,...l,adjacencyList:h,transitionMatrix:g,characteristics:v,shortcut:d,helpers:p}},xc=Di({__name:"Graph",props:{graph:{}},emits:["graphRef"],setup(o,{emit:e}){const t=o,n=e,r=u=>n("graphRef",u),i=D(t.graph.getTheme("graphBgPatternColor")),s=D(t.graph.getTheme("graphBgColor")),a=async()=>{i.value=t.graph.getTheme("graphBgPatternColor"),s.value=t.graph.getTheme("graphBgColor")};return t.graph.subscribe("onThemeChange",a),(u,c)=>(Ii(),Pi(Bi,{onCanvasRef:r,color:s.value,"pattern-color":i.value},null,8,["color","pattern-color"]))}});export{qu as B,Wu as C,su as L,jo as T,xc as _,pu as a,au as b,mt as g,za as i,bc as r,Tc as u};
